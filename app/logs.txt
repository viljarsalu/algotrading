web-app-1  | /usr/local/lib/python3.12/site-packages/web3/__init__.py:2: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
web-app-1  |   import pkg_resources
web-app-1  | Node URL should not contain http(s)://. Stripping the prefix. In the future, consider providing the URL without the http(s) prefix.
web-app-1  | 2025-10-25 12:06:28,175 - src.core.logging_config - INFO - Logging configuration initialized
web-app-1  | Including API routers...
web-app-1  | Auth router included
web-app-1  | User router included
web-app-1  | Trading router included
web-app-1  | Webhooks router included
web-app-1  | WebSocket router included
web-app-1  | Enhanced WebSocket router included
web-app-1  | Health check router included
web-app-1  | Equity curve router included
web-app-1  | 2025-10-25 12:06:28,184 - src.main - INFO - CORS configured for origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:5173']
web-app-1  | Adding SlowAPI middleware...
web-app-1  | SlowAPI middleware added
web-app-1  | Rate limit exception handler added
web-app-1  | INFO:     Started server process [1]
web-app-1  | INFO:     Waiting for application startup.
web-app-1  | Starting dYdX Trading Service...
web-app-1  | 2025-10-25 12:06:28,186 - src.main - INFO - Starting dYdX Trading Service...
web-app-1  | Starting lifespan event handler...
web-app-1  | Validating network configuration...
web-app-1  | 2025-10-25 12:06:28,186 - src.core.network_validator - INFO - development environment detected. Using testnet.
web-app-1  | 2025-10-25 12:06:28,186 - src.main - INFO - Network validation passed: testnet (dydx-testnet-1)
web-app-1  | 
web-app-1  | ============================================================
web-app-1  | dYdX Network Configuration
web-app-1  | ============================================================
web-app-1  | Environment: development
web-app-1  | Network Type: TESTNET
web-app-1  | Network ID: 11155111
web-app-1  | Chain ID: dydx-testnet-1
web-app-1  | REST URL: https://indexer.v4testnet.dydx.exchange
web-app-1  | WebSocket URL: wss://indexer.v4testnet.dydx.exchange/v4/ws
web-app-1  | Is Production: False
web-app-1  | ============================================================
web-app-1  | 
web-app-1  | ✅ Configuration is safe.
web-app-1  | 
web-app-1  | Validating application configuration...
web-app-1  | Configuration validation messages: []
web-app-1  | 2025-10-25 12:06:28,186 - src.main - INFO - Encryption manager initialized
web-app-1  | 2025-10-25 12:06:28,239 INFO sqlalchemy.engine.Engine select pg_catalog.version()
web-app-1  | 2025-10-25 12:06:28,239 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
web-app-1  | 2025-10-25 12:06:28,240 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:28,240 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:28,240 INFO sqlalchemy.engine.Engine select current_schema()
web-app-1  | 2025-10-25 12:06:28,240 - sqlalchemy.engine.Engine - INFO - select current_schema()
web-app-1  | 2025-10-25 12:06:28,240 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:28,240 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:28,241 INFO sqlalchemy.engine.Engine show standard_conforming_strings
web-app-1  | 2025-10-25 12:06:28,241 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
web-app-1  | 2025-10-25 12:06:28,241 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:28,241 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:28,242 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:28,242 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:28,243 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:28,243 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:28,243 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:28,243 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:28,245 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:28,245 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:28,245 INFO sqlalchemy.engine.Engine [cached since 0.001529s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:28,245 - sqlalchemy.engine.Engine - INFO - [cached since 0.001529s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:28,245 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:28,245 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:28,245 INFO sqlalchemy.engine.Engine [cached since 0.001924s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:28,245 - sqlalchemy.engine.Engine - INFO - [cached since 0.001924s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:28,246 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:28,246 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:28,246 INFO sqlalchemy.engine.Engine [cached since 0.002333s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:28,246 - sqlalchemy.engine.Engine - INFO - [cached since 0.002333s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:28,246 INFO sqlalchemy.engine.Engine 
web-app-1  | CREATE TABLE trades (
web-app-1  | 	id SERIAL NOT NULL, 
web-app-1  | 	position_id INTEGER NOT NULL, 
web-app-1  | 	side VARCHAR NOT NULL, 
web-app-1  | 	price NUMERIC(20, 10) NOT NULL, 
web-app-1  | 	amount NUMERIC(20, 10) NOT NULL, 
web-app-1  | 	fee NUMERIC(10, 5) NOT NULL, 
web-app-1  | 	timestamp TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
web-app-1  | 	PRIMARY KEY (id), 
web-app-1  | 	FOREIGN KEY(position_id) REFERENCES positions (id)
web-app-1  | )
web-app-1  | 
web-app-1  | 
web-app-1  | 2025-10-25 12:06:28,246 - sqlalchemy.engine.Engine - INFO - 
web-app-1  | CREATE TABLE trades (
web-app-1  | 	id SERIAL NOT NULL, 
web-app-1  | 	position_id INTEGER NOT NULL, 
web-app-1  | 	side VARCHAR NOT NULL, 
web-app-1  | 	price NUMERIC(20, 10) NOT NULL, 
web-app-1  | 	amount NUMERIC(20, 10) NOT NULL, 
web-app-1  | 	fee NUMERIC(10, 5) NOT NULL, 
web-app-1  | 	timestamp TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
web-app-1  | 	PRIMARY KEY (id), 
web-app-1  | 	FOREIGN KEY(position_id) REFERENCES positions (id)
web-app-1  | )
web-app-1  | 
web-app-1  | 
web-app-1  | 2025-10-25 12:06:28,246 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
web-app-1  | 2025-10-25 12:06:28,246 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
web-app-1  | 2025-10-25 12:06:28,250 INFO sqlalchemy.engine.Engine 
web-app-1  | CREATE TABLE webhook_events (
web-app-1  | 	id SERIAL NOT NULL, 
web-app-1  | 	user_address VARCHAR NOT NULL, 
web-app-1  | 	event_type VARCHAR NOT NULL, 
web-app-1  | 	payload VARCHAR NOT NULL, 
web-app-1  | 	processed BOOLEAN NOT NULL, 
web-app-1  | 	created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
web-app-1  | 	PRIMARY KEY (id), 
web-app-1  | 	FOREIGN KEY(user_address) REFERENCES users (wallet_address)
web-app-1  | )
web-app-1  | 
web-app-1  | 
web-app-1  | 2025-10-25 12:06:28,250 - sqlalchemy.engine.Engine - INFO - 
web-app-1  | CREATE TABLE webhook_events (
web-app-1  | 	id SERIAL NOT NULL, 
web-app-1  | 	user_address VARCHAR NOT NULL, 
web-app-1  | 	event_type VARCHAR NOT NULL, 
web-app-1  | 	payload VARCHAR NOT NULL, 
web-app-1  | 	processed BOOLEAN NOT NULL, 
web-app-1  | 	created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL, 
web-app-1  | 	PRIMARY KEY (id), 
web-app-1  | 	FOREIGN KEY(user_address) REFERENCES users (wallet_address)
web-app-1  | )
web-app-1  | 
web-app-1  | 
web-app-1  | 2025-10-25 12:06:28,250 INFO sqlalchemy.engine.Engine [no key 0.00009s] ()
web-app-1  | 2025-10-25 12:06:28,250 - sqlalchemy.engine.Engine - INFO - [no key 0.00009s] ()
web-app-1  | 2025-10-25 12:06:28,252 INFO sqlalchemy.engine.Engine COMMIT
web-app-1  | 2025-10-25 12:06:28,252 - sqlalchemy.engine.Engine - INFO - COMMIT
web-app-1  | 2025-10-25 12:06:28,253 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:28,253 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:28,253 INFO sqlalchemy.engine.Engine SELECT 1
web-app-1  | 2025-10-25 12:06:28,253 - sqlalchemy.engine.Engine - INFO - SELECT 1
web-app-1  | 2025-10-25 12:06:28,253 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ()
web-app-1  | 2025-10-25 12:06:28,253 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ()
web-app-1  | 2025-10-25 12:06:28,254 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:28,254 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:28,254 - src.db.database - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:06:28,254 - src.main - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:06:28,254 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:28,254 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:28,254 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:06:28,254 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:06:28,254 INFO sqlalchemy.engine.Engine [generated in 0.00007s] ()
web-app-1  | 2025-10-25 12:06:28,254 - sqlalchemy.engine.Engine - INFO - [generated in 0.00007s] ()
web-app-1  | 2025-10-25 12:06:28,254 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:28,254 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:28,255 - src.main - INFO - Database health check passed in 0.0ms
web-app-1  | 2025-10-25 12:06:28,255 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:28,255 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:28,259 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:06:28,259 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:06:28,259 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:06:28,259 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:06:28,260 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:28,260 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:28,260 - src.main - ERROR - Application startup failed: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | ERROR:    Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 526, in _prepare_and_execute
web-app-1  |     prepared_stmt, attributes = await adapt_connection._prepare(
web-app-1  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 773, in _prepare
web-app-1  |     prepared_stmt = await self._connection.prepare(
web-app-1  |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 636, in prepare
web-app-1  |     return await self._prepare(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 654, in _prepare
web-app-1  |     stmt = await self._get_statement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 433, in _get_statement
web-app-1  |     statement = await self._protocol.prepare(
web-app-1  |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "asyncpg/protocol/protocol.pyx", line 166, in prepare
web-app-1  | asyncpg.exceptions.UndefinedColumnError: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 677, in lifespan
web-app-1  |     async with self.lifespan_context(app) as maybe_state:
web-app-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__
web-app-1  |     return await anext(self.gen)
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/main.py", line 95, in lifespan
web-app-1  |     await create_sample_data()
web-app-1  |   File "/app/src/db/database.py", line 366, in create_sample_data
web-app-1  |     sample_user = await db_manager.get_user_by_wallet("0x1234567890123456789012345678901234567890")
web-app-1  |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/db/database.py", line 166, in get_user_by_wallet
web-app-1  |     result = await session.execute(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
web-app-1  |     result = await greenlet_spawn(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
web-app-1  |     result = context.throw(*sys.exc_info())
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
web-app-1  |     return self._execute_internal(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
web-app-1  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
web-app-1  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
web-app-1  |     result = conn.execute(
web-app-1  |              ^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
web-app-1  |     return meth(
web-app-1  |            ^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
web-app-1  |     return connection._execute_clauseelement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
web-app-1  |     ret = self._execute_context(
web-app-1  |           ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
web-app-1  |     return self._exec_single_context(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
web-app-1  |     self._handle_dbapi_exception(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
web-app-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | 
web-app-1  | ERROR:    Application startup failed. Exiting.
web-app-1  | /usr/local/lib/python3.12/site-packages/web3/__init__.py:2: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
web-app-1  |   import pkg_resources
web-app-1  | Node URL should not contain http(s)://. Stripping the prefix. In the future, consider providing the URL without the http(s) prefix.
web-app-1  | 2025-10-25 12:06:33,393 - src.core.logging_config - INFO - Logging configuration initialized
web-app-1  | Including API routers...
web-app-1  | Auth router included
web-app-1  | User router included
web-app-1  | Trading router included
web-app-1  | Webhooks router included
web-app-1  | WebSocket router included
web-app-1  | Enhanced WebSocket router included
web-app-1  | Health check router included
web-app-1  | Equity curve router included
web-app-1  | 2025-10-25 12:06:33,404 - src.main - INFO - CORS configured for origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:5173']
web-app-1  | Adding SlowAPI middleware...
web-app-1  | SlowAPI middleware added
web-app-1  | Rate limit exception handler added
web-app-1  | INFO:     Started server process [1]
web-app-1  | INFO:     Waiting for application startup.
web-app-1  | Starting dYdX Trading Service...
web-app-1  | 2025-10-25 12:06:33,409 - src.main - INFO - Starting dYdX Trading Service...
web-app-1  | Starting lifespan event handler...
web-app-1  | Validating network configuration...
web-app-1  | 2025-10-25 12:06:33,409 - src.core.network_validator - INFO - development environment detected. Using testnet.
web-app-1  | 2025-10-25 12:06:33,409 - src.main - INFO - Network validation passed: testnet (dydx-testnet-1)
web-app-1  | 
web-app-1  | ============================================================
web-app-1  | dYdX Network Configuration
web-app-1  | ============================================================
web-app-1  | Environment: development
web-app-1  | Network Type: TESTNET
web-app-1  | Network ID: 11155111
web-app-1  | Chain ID: dydx-testnet-1
web-app-1  | REST URL: https://indexer.v4testnet.dydx.exchange
web-app-1  | WebSocket URL: wss://indexer.v4testnet.dydx.exchange/v4/ws
web-app-1  | Is Production: False
web-app-1  | ============================================================
web-app-1  | 
web-app-1  | ✅ Configuration is safe.
web-app-1  | 
web-app-1  | Validating application configuration...
web-app-1  | Configuration validation messages: []
web-app-1  | 2025-10-25 12:06:33,410 - src.main - INFO - Encryption manager initialized
web-app-1  | 2025-10-25 12:06:33,478 INFO sqlalchemy.engine.Engine select pg_catalog.version()
web-app-1  | 2025-10-25 12:06:33,478 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
web-app-1  | 2025-10-25 12:06:33,478 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:33,478 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:33,479 INFO sqlalchemy.engine.Engine select current_schema()
web-app-1  | 2025-10-25 12:06:33,479 - sqlalchemy.engine.Engine - INFO - select current_schema()
web-app-1  | 2025-10-25 12:06:33,479 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:33,479 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:33,480 INFO sqlalchemy.engine.Engine show standard_conforming_strings
web-app-1  | 2025-10-25 12:06:33,480 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
web-app-1  | 2025-10-25 12:06:33,480 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:33,480 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:33,481 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:33,481 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:33,484 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:33,484 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:33,484 INFO sqlalchemy.engine.Engine [generated in 0.00023s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:33,484 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:33,486 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:33,486 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:33,486 INFO sqlalchemy.engine.Engine [cached since 0.002204s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:33,486 - sqlalchemy.engine.Engine - INFO - [cached since 0.002204s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:33,487 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:33,487 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:33,487 INFO sqlalchemy.engine.Engine [cached since 0.002741s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:33,487 - sqlalchemy.engine.Engine - INFO - [cached since 0.002741s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:33,487 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:33,487 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:33,487 INFO sqlalchemy.engine.Engine [cached since 0.003183s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:33,487 - sqlalchemy.engine.Engine - INFO - [cached since 0.003183s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:33,488 INFO sqlalchemy.engine.Engine COMMIT
web-app-1  | 2025-10-25 12:06:33,488 - sqlalchemy.engine.Engine - INFO - COMMIT
web-app-1  | 2025-10-25 12:06:33,489 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:33,489 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:33,489 INFO sqlalchemy.engine.Engine SELECT 1
web-app-1  | 2025-10-25 12:06:33,489 - sqlalchemy.engine.Engine - INFO - SELECT 1
web-app-1  | 2025-10-25 12:06:33,489 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ()
web-app-1  | 2025-10-25 12:06:33,489 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
web-app-1  | 2025-10-25 12:06:33,490 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:33,490 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:33,490 - src.db.database - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:06:33,490 - src.main - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:06:33,491 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:33,491 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:33,491 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:06:33,491 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:06:33,491 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ()
web-app-1  | 2025-10-25 12:06:33,491 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
web-app-1  | 2025-10-25 12:06:33,492 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:33,492 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:33,492 - src.main - INFO - Database health check passed in 2.0ms
web-app-1  | 2025-10-25 12:06:33,493 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:33,493 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:33,498 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:06:33,498 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:06:33,498 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:06:33,498 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:06:33,499 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:33,499 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:33,499 - src.main - ERROR - Application startup failed: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | ERROR:    Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 526, in _prepare_and_execute
web-app-1  |     prepared_stmt, attributes = await adapt_connection._prepare(
web-app-1  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 773, in _prepare
web-app-1  |     prepared_stmt = await self._connection.prepare(
web-app-1  |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 636, in prepare
web-app-1  |     return await self._prepare(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 654, in _prepare
web-app-1  |     stmt = await self._get_statement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 433, in _get_statement
web-app-1  |     statement = await self._protocol.prepare(
web-app-1  |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "asyncpg/protocol/protocol.pyx", line 166, in prepare
web-app-1  | asyncpg.exceptions.UndefinedColumnError: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 677, in lifespan
web-app-1  |     async with self.lifespan_context(app) as maybe_state:
web-app-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__
web-app-1  |     return await anext(self.gen)
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/main.py", line 95, in lifespan
web-app-1  |     await create_sample_data()
web-app-1  |   File "/app/src/db/database.py", line 366, in create_sample_data
web-app-1  |     sample_user = await db_manager.get_user_by_wallet("0x1234567890123456789012345678901234567890")
web-app-1  |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/db/database.py", line 166, in get_user_by_wallet
web-app-1  |     result = await session.execute(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
web-app-1  |     result = await greenlet_spawn(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
web-app-1  |     result = context.throw(*sys.exc_info())
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
web-app-1  |     return self._execute_internal(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
web-app-1  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
web-app-1  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
web-app-1  |     result = conn.execute(
web-app-1  |              ^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
web-app-1  |     return meth(
web-app-1  |            ^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
web-app-1  |     return connection._execute_clauseelement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
web-app-1  |     ret = self._execute_context(
web-app-1  |           ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
web-app-1  |     return self._exec_single_context(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
web-app-1  |     self._handle_dbapi_exception(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
web-app-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | 
web-app-1  | ERROR:    Application startup failed. Exiting.
web-app-1  | /usr/local/lib/python3.12/site-packages/web3/__init__.py:2: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
web-app-1  |   import pkg_resources
web-app-1  | Node URL should not contain http(s)://. Stripping the prefix. In the future, consider providing the URL without the http(s) prefix.
web-app-1  | 2025-10-25 12:06:38,881 - src.core.logging_config - INFO - Logging configuration initialized
web-app-1  | Including API routers...
web-app-1  | Auth router included
web-app-1  | User router included
web-app-1  | Trading router included
web-app-1  | Webhooks router included
web-app-1  | WebSocket router included
web-app-1  | Enhanced WebSocket router included
web-app-1  | Health check router included
web-app-1  | Equity curve router included
web-app-1  | 2025-10-25 12:06:38,889 - src.main - INFO - CORS configured for origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:5173']
web-app-1  | Adding SlowAPI middleware...
web-app-1  | SlowAPI middleware added
web-app-1  | Rate limit exception handler added
web-app-1  | INFO:     Started server process [1]
web-app-1  | INFO:     Waiting for application startup.
web-app-1  | Starting dYdX Trading Service...
web-app-1  | 2025-10-25 12:06:38,891 - src.main - INFO - Starting dYdX Trading Service...
web-app-1  | Starting lifespan event handler...
web-app-1  | Validating network configuration...
web-app-1  | 2025-10-25 12:06:38,892 - src.core.network_validator - INFO - development environment detected. Using testnet.
web-app-1  | 2025-10-25 12:06:38,892 - src.main - INFO - Network validation passed: testnet (dydx-testnet-1)
web-app-1  | 
web-app-1  | ============================================================
web-app-1  | dYdX Network Configuration
web-app-1  | ============================================================
web-app-1  | Environment: development
web-app-1  | Network Type: TESTNET
web-app-1  | Network ID: 11155111
web-app-1  | Chain ID: dydx-testnet-1
web-app-1  | REST URL: https://indexer.v4testnet.dydx.exchange
web-app-1  | WebSocket URL: wss://indexer.v4testnet.dydx.exchange/v4/ws
web-app-1  | Is Production: False
web-app-1  | ============================================================
web-app-1  | 
web-app-1  | ✅ Configuration is safe.
web-app-1  | 
web-app-1  | Validating application configuration...
web-app-1  | Configuration validation messages: []
web-app-1  | 2025-10-25 12:06:38,892 - src.main - INFO - Encryption manager initialized
web-app-1  | 2025-10-25 12:06:38,938 INFO sqlalchemy.engine.Engine select pg_catalog.version()
web-app-1  | 2025-10-25 12:06:38,938 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
web-app-1  | 2025-10-25 12:06:38,938 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:38,938 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:38,939 INFO sqlalchemy.engine.Engine select current_schema()
web-app-1  | 2025-10-25 12:06:38,939 - sqlalchemy.engine.Engine - INFO - select current_schema()
web-app-1  | 2025-10-25 12:06:38,939 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:38,939 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:38,939 INFO sqlalchemy.engine.Engine show standard_conforming_strings
web-app-1  | 2025-10-25 12:06:38,939 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
web-app-1  | 2025-10-25 12:06:38,939 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:38,939 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:38,940 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:38,940 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:38,942 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:38,942 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:38,942 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:38,942 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:38,943 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:38,943 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:38,943 INFO sqlalchemy.engine.Engine [cached since 0.001594s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:38,943 - sqlalchemy.engine.Engine - INFO - [cached since 0.001594s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:38,943 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:38,943 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:38,943 INFO sqlalchemy.engine.Engine [cached since 0.002006s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:38,943 - sqlalchemy.engine.Engine - INFO - [cached since 0.002006s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:38,944 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:38,944 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:38,944 INFO sqlalchemy.engine.Engine [cached since 0.00252s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:38,944 - sqlalchemy.engine.Engine - INFO - [cached since 0.00252s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:38,944 INFO sqlalchemy.engine.Engine COMMIT
web-app-1  | 2025-10-25 12:06:38,944 - sqlalchemy.engine.Engine - INFO - COMMIT
web-app-1  | 2025-10-25 12:06:38,945 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:38,945 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:38,945 INFO sqlalchemy.engine.Engine SELECT 1
web-app-1  | 2025-10-25 12:06:38,945 - sqlalchemy.engine.Engine - INFO - SELECT 1
web-app-1  | 2025-10-25 12:06:38,945 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ()
web-app-1  | 2025-10-25 12:06:38,945 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
web-app-1  | 2025-10-25 12:06:38,946 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:38,946 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:38,946 - src.db.database - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:06:38,946 - src.main - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:06:38,946 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:38,946 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:38,946 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:06:38,946 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:06:38,947 INFO sqlalchemy.engine.Engine [generated in 0.00009s] ()
web-app-1  | 2025-10-25 12:06:38,947 - sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ()
web-app-1  | 2025-10-25 12:06:38,947 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:38,947 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:38,947 - src.main - INFO - Database health check passed in 1.0ms
web-app-1  | 2025-10-25 12:06:38,948 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:38,948 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:38,951 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:06:38,951 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:06:38,951 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:06:38,951 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:06:38,952 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:38,952 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:38,952 - src.main - ERROR - Application startup failed: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | ERROR:    Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 526, in _prepare_and_execute
web-app-1  |     prepared_stmt, attributes = await adapt_connection._prepare(
web-app-1  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 773, in _prepare
web-app-1  |     prepared_stmt = await self._connection.prepare(
web-app-1  |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 636, in prepare
web-app-1  |     return await self._prepare(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 654, in _prepare
web-app-1  |     stmt = await self._get_statement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 433, in _get_statement
web-app-1  |     statement = await self._protocol.prepare(
web-app-1  |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "asyncpg/protocol/protocol.pyx", line 166, in prepare
web-app-1  | asyncpg.exceptions.UndefinedColumnError: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 677, in lifespan
web-app-1  |     async with self.lifespan_context(app) as maybe_state:
web-app-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__
web-app-1  |     return await anext(self.gen)
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/main.py", line 95, in lifespan
web-app-1  |     await create_sample_data()
web-app-1  |   File "/app/src/db/database.py", line 366, in create_sample_data
web-app-1  |     sample_user = await db_manager.get_user_by_wallet("0x1234567890123456789012345678901234567890")
web-app-1  |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/db/database.py", line 166, in get_user_by_wallet
web-app-1  |     result = await session.execute(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
web-app-1  |     result = await greenlet_spawn(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
web-app-1  |     result = context.throw(*sys.exc_info())
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
web-app-1  |     return self._execute_internal(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
web-app-1  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
web-app-1  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
web-app-1  |     result = conn.execute(
web-app-1  |              ^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
web-app-1  |     return meth(
web-app-1  |            ^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
web-app-1  |     return connection._execute_clauseelement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
web-app-1  |     ret = self._execute_context(
web-app-1  |           ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
web-app-1  |     return self._exec_single_context(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
web-app-1  |     self._handle_dbapi_exception(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
web-app-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | 
web-app-1  | ERROR:    Application startup failed. Exiting.
web-app-1  | /usr/local/lib/python3.12/site-packages/web3/__init__.py:2: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
web-app-1  |   import pkg_resources
web-app-1  | Node URL should not contain http(s)://. Stripping the prefix. In the future, consider providing the URL without the http(s) prefix.
web-app-1  | 2025-10-25 12:06:44,221 - src.core.logging_config - INFO - Logging configuration initialized
web-app-1  | Including API routers...
web-app-1  | Auth router included
web-app-1  | User router included
web-app-1  | Trading router included
web-app-1  | Webhooks router included
web-app-1  | WebSocket router included
web-app-1  | Enhanced WebSocket router included
web-app-1  | Health check router included
web-app-1  | Equity curve router included
web-app-1  | 2025-10-25 12:06:44,229 - src.main - INFO - CORS configured for origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:5173']
web-app-1  | Adding SlowAPI middleware...
web-app-1  | SlowAPI middleware added
web-app-1  | Rate limit exception handler added
web-app-1  | INFO:     Started server process [1]
web-app-1  | INFO:     Waiting for application startup.
web-app-1  | Starting dYdX Trading Service...
web-app-1  | 2025-10-25 12:06:44,231 - src.main - INFO - Starting dYdX Trading Service...
web-app-1  | Starting lifespan event handler...
web-app-1  | Validating network configuration...
web-app-1  | 2025-10-25 12:06:44,231 - src.core.network_validator - INFO - development environment detected. Using testnet.
web-app-1  | 2025-10-25 12:06:44,232 - src.main - INFO - Network validation passed: testnet (dydx-testnet-1)
web-app-1  | 
web-app-1  | ============================================================
web-app-1  | dYdX Network Configuration
web-app-1  | ============================================================
web-app-1  | Environment: development
web-app-1  | Network Type: TESTNET
web-app-1  | Network ID: 11155111
web-app-1  | Chain ID: dydx-testnet-1
web-app-1  | REST URL: https://indexer.v4testnet.dydx.exchange
web-app-1  | WebSocket URL: wss://indexer.v4testnet.dydx.exchange/v4/ws
web-app-1  | Is Production: False
web-app-1  | ============================================================
web-app-1  | 
web-app-1  | ✅ Configuration is safe.
web-app-1  | 
web-app-1  | Validating application configuration...
web-app-1  | Configuration validation messages: []
web-app-1  | 2025-10-25 12:06:44,232 - src.main - INFO - Encryption manager initialized
web-app-1  | 2025-10-25 12:06:44,272 INFO sqlalchemy.engine.Engine select pg_catalog.version()
web-app-1  | 2025-10-25 12:06:44,272 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
web-app-1  | 2025-10-25 12:06:44,272 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:44,272 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:44,273 INFO sqlalchemy.engine.Engine select current_schema()
web-app-1  | 2025-10-25 12:06:44,273 - sqlalchemy.engine.Engine - INFO - select current_schema()
web-app-1  | 2025-10-25 12:06:44,273 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:44,273 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:44,273 INFO sqlalchemy.engine.Engine show standard_conforming_strings
web-app-1  | 2025-10-25 12:06:44,273 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
web-app-1  | 2025-10-25 12:06:44,273 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:44,273 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:44,274 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:44,274 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:44,275 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:44,275 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:44,276 INFO sqlalchemy.engine.Engine [generated in 0.00022s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:44,276 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:44,277 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:44,277 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:44,277 INFO sqlalchemy.engine.Engine [cached since 0.001304s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:44,277 - sqlalchemy.engine.Engine - INFO - [cached since 0.001304s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:44,277 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:44,277 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:44,277 INFO sqlalchemy.engine.Engine [cached since 0.001695s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:44,277 - sqlalchemy.engine.Engine - INFO - [cached since 0.001695s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:44,277 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:44,277 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:44,277 INFO sqlalchemy.engine.Engine [cached since 0.002084s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:44,277 - sqlalchemy.engine.Engine - INFO - [cached since 0.002084s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:44,278 INFO sqlalchemy.engine.Engine COMMIT
web-app-1  | 2025-10-25 12:06:44,278 - sqlalchemy.engine.Engine - INFO - COMMIT
web-app-1  | 2025-10-25 12:06:44,278 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:44,278 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:44,279 INFO sqlalchemy.engine.Engine SELECT 1
web-app-1  | 2025-10-25 12:06:44,279 - sqlalchemy.engine.Engine - INFO - SELECT 1
web-app-1  | 2025-10-25 12:06:44,279 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ()
web-app-1  | 2025-10-25 12:06:44,279 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ()
web-app-1  | 2025-10-25 12:06:44,279 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:44,279 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:44,279 - src.db.database - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:06:44,280 - src.main - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:06:44,280 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:44,280 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:44,280 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:06:44,280 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:06:44,280 INFO sqlalchemy.engine.Engine [generated in 0.00009s] ()
web-app-1  | 2025-10-25 12:06:44,280 - sqlalchemy.engine.Engine - INFO - [generated in 0.00009s] ()
web-app-1  | 2025-10-25 12:06:44,280 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:44,280 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:44,281 - src.main - INFO - Database health check passed in 0.0ms
web-app-1  | 2025-10-25 12:06:44,281 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:44,281 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:44,285 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:06:44,285 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:06:44,285 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:06:44,285 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:06:44,285 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:44,285 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:44,286 - src.main - ERROR - Application startup failed: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | ERROR:    Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 526, in _prepare_and_execute
web-app-1  |     prepared_stmt, attributes = await adapt_connection._prepare(
web-app-1  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 773, in _prepare
web-app-1  |     prepared_stmt = await self._connection.prepare(
web-app-1  |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 636, in prepare
web-app-1  |     return await self._prepare(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 654, in _prepare
web-app-1  |     stmt = await self._get_statement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 433, in _get_statement
web-app-1  |     statement = await self._protocol.prepare(
web-app-1  |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "asyncpg/protocol/protocol.pyx", line 166, in prepare
web-app-1  | asyncpg.exceptions.UndefinedColumnError: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 677, in lifespan
web-app-1  |     async with self.lifespan_context(app) as maybe_state:
web-app-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__
web-app-1  |     return await anext(self.gen)
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/main.py", line 95, in lifespan
web-app-1  |     await create_sample_data()
web-app-1  |   File "/app/src/db/database.py", line 366, in create_sample_data
web-app-1  |     sample_user = await db_manager.get_user_by_wallet("0x1234567890123456789012345678901234567890")
web-app-1  |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/db/database.py", line 166, in get_user_by_wallet
web-app-1  |     result = await session.execute(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
web-app-1  |     result = await greenlet_spawn(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
web-app-1  |     result = context.throw(*sys.exc_info())
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
web-app-1  |     return self._execute_internal(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
web-app-1  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
web-app-1  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
web-app-1  |     result = conn.execute(
web-app-1  |              ^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
web-app-1  |     return meth(
web-app-1  |            ^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
web-app-1  |     return connection._execute_clauseelement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
web-app-1  |     ret = self._execute_context(
web-app-1  |           ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
web-app-1  |     return self._exec_single_context(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
web-app-1  |     self._handle_dbapi_exception(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
web-app-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | 
web-app-1  | ERROR:    Application startup failed. Exiting.
web-app-1  | /usr/local/lib/python3.12/site-packages/web3/__init__.py:2: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
web-app-1  |   import pkg_resources
web-app-1  | Node URL should not contain http(s)://. Stripping the prefix. In the future, consider providing the URL without the http(s) prefix.
web-app-1  | 2025-10-25 12:06:49,940 - src.core.logging_config - INFO - Logging configuration initialized
web-app-1  | Including API routers...
web-app-1  | Auth router included
web-app-1  | User router included
web-app-1  | Trading router included
web-app-1  | Webhooks router included
web-app-1  | WebSocket router included
web-app-1  | Enhanced WebSocket router included
web-app-1  | Health check router included
web-app-1  | Equity curve router included
web-app-1  | 2025-10-25 12:06:49,948 - src.main - INFO - CORS configured for origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:5173']
web-app-1  | Adding SlowAPI middleware...
web-app-1  | SlowAPI middleware added
web-app-1  | Rate limit exception handler added
web-app-1  | INFO:     Started server process [1]
web-app-1  | INFO:     Waiting for application startup.
web-app-1  | Starting dYdX Trading Service...
web-app-1  | 2025-10-25 12:06:49,951 - src.main - INFO - Starting dYdX Trading Service...
web-app-1  | Starting lifespan event handler...
web-app-1  | Validating network configuration...
web-app-1  | 2025-10-25 12:06:49,951 - src.core.network_validator - INFO - development environment detected. Using testnet.
web-app-1  | 2025-10-25 12:06:49,951 - src.main - INFO - Network validation passed: testnet (dydx-testnet-1)
web-app-1  | 
web-app-1  | ============================================================
web-app-1  | dYdX Network Configuration
web-app-1  | ============================================================
web-app-1  | Environment: development
web-app-1  | Network Type: TESTNET
web-app-1  | Network ID: 11155111
web-app-1  | Chain ID: dydx-testnet-1
web-app-1  | REST URL: https://indexer.v4testnet.dydx.exchange
web-app-1  | WebSocket URL: wss://indexer.v4testnet.dydx.exchange/v4/ws
web-app-1  | Is Production: False
web-app-1  | ============================================================
web-app-1  | 
web-app-1  | ✅ Configuration is safe.
web-app-1  | 
web-app-1  | Validating application configuration...
web-app-1  | Configuration validation messages: []
web-app-1  | 2025-10-25 12:06:49,951 - src.main - INFO - Encryption manager initialized
web-app-1  | 2025-10-25 12:06:49,994 INFO sqlalchemy.engine.Engine select pg_catalog.version()
web-app-1  | 2025-10-25 12:06:49,994 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
web-app-1  | 2025-10-25 12:06:49,994 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:49,994 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:49,995 INFO sqlalchemy.engine.Engine select current_schema()
web-app-1  | 2025-10-25 12:06:49,995 - sqlalchemy.engine.Engine - INFO - select current_schema()
web-app-1  | 2025-10-25 12:06:49,995 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:49,995 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:49,996 INFO sqlalchemy.engine.Engine show standard_conforming_strings
web-app-1  | 2025-10-25 12:06:49,996 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
web-app-1  | 2025-10-25 12:06:49,996 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:49,996 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:49,996 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:49,996 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:49,998 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:49,998 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:49,998 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:49,998 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:49,999 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:49,999 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:49,999 INFO sqlalchemy.engine.Engine [cached since 0.001388s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:49,999 - sqlalchemy.engine.Engine - INFO - [cached since 0.001388s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:50,000 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:50,000 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:50,000 INFO sqlalchemy.engine.Engine [cached since 0.001974s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:50,000 - sqlalchemy.engine.Engine - INFO - [cached since 0.001974s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:50,000 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:50,000 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:50,001 INFO sqlalchemy.engine.Engine [cached since 0.00261s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:50,001 - sqlalchemy.engine.Engine - INFO - [cached since 0.00261s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:50,001 INFO sqlalchemy.engine.Engine COMMIT
web-app-1  | 2025-10-25 12:06:50,001 - sqlalchemy.engine.Engine - INFO - COMMIT
web-app-1  | 2025-10-25 12:06:50,002 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:50,002 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:50,002 INFO sqlalchemy.engine.Engine SELECT 1
web-app-1  | 2025-10-25 12:06:50,002 - sqlalchemy.engine.Engine - INFO - SELECT 1
web-app-1  | 2025-10-25 12:06:50,002 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ()
web-app-1  | 2025-10-25 12:06:50,002 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
web-app-1  | 2025-10-25 12:06:50,003 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:50,003 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:50,003 - src.db.database - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:06:50,003 - src.main - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:06:50,004 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:50,004 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:50,004 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:06:50,004 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:06:50,004 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ()
web-app-1  | 2025-10-25 12:06:50,004 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
web-app-1  | 2025-10-25 12:06:50,004 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:50,004 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:50,005 - src.main - INFO - Database health check passed in 1.0ms
web-app-1  | 2025-10-25 12:06:50,005 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:50,005 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:50,009 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:06:50,009 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:06:50,009 INFO sqlalchemy.engine.Engine [generated in 0.00015s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:06:50,009 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:06:50,010 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:50,010 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:50,010 - src.main - ERROR - Application startup failed: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | ERROR:    Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 526, in _prepare_and_execute
web-app-1  |     prepared_stmt, attributes = await adapt_connection._prepare(
web-app-1  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 773, in _prepare
web-app-1  |     prepared_stmt = await self._connection.prepare(
web-app-1  |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 636, in prepare
web-app-1  |     return await self._prepare(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 654, in _prepare
web-app-1  |     stmt = await self._get_statement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 433, in _get_statement
web-app-1  |     statement = await self._protocol.prepare(
web-app-1  |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "asyncpg/protocol/protocol.pyx", line 166, in prepare
web-app-1  | asyncpg.exceptions.UndefinedColumnError: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 677, in lifespan
web-app-1  |     async with self.lifespan_context(app) as maybe_state:
web-app-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__
web-app-1  |     return await anext(self.gen)
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/main.py", line 95, in lifespan
web-app-1  |     await create_sample_data()
web-app-1  |   File "/app/src/db/database.py", line 366, in create_sample_data
web-app-1  |     sample_user = await db_manager.get_user_by_wallet("0x1234567890123456789012345678901234567890")
web-app-1  |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/db/database.py", line 166, in get_user_by_wallet
web-app-1  |     result = await session.execute(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
web-app-1  |     result = await greenlet_spawn(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
web-app-1  |     result = context.throw(*sys.exc_info())
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
web-app-1  |     return self._execute_internal(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
web-app-1  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
web-app-1  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
web-app-1  |     result = conn.execute(
web-app-1  |              ^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
web-app-1  |     return meth(
web-app-1  |            ^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
web-app-1  |     return connection._execute_clauseelement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
web-app-1  |     ret = self._execute_context(
web-app-1  |           ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
web-app-1  |     return self._exec_single_context(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
web-app-1  |     self._handle_dbapi_exception(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
web-app-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | 
web-app-1  | ERROR:    Application startup failed. Exiting.
web-app-1  | /usr/local/lib/python3.12/site-packages/web3/__init__.py:2: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
web-app-1  |   import pkg_resources
web-app-1  | Node URL should not contain http(s)://. Stripping the prefix. In the future, consider providing the URL without the http(s) prefix.
web-app-1  | 2025-10-25 12:06:56,779 - src.core.logging_config - INFO - Logging configuration initialized
web-app-1  | Including API routers...
web-app-1  | Auth router included
web-app-1  | User router included
web-app-1  | Trading router included
web-app-1  | Webhooks router included
web-app-1  | WebSocket router included
web-app-1  | Enhanced WebSocket router included
web-app-1  | Health check router included
web-app-1  | Equity curve router included
web-app-1  | 2025-10-25 12:06:56,789 - src.main - INFO - CORS configured for origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:5173']
web-app-1  | Adding SlowAPI middleware...
web-app-1  | SlowAPI middleware added
web-app-1  | Rate limit exception handler added
web-app-1  | INFO:     Started server process [1]
web-app-1  | INFO:     Waiting for application startup.
web-app-1  | Starting dYdX Trading Service...
web-app-1  | 2025-10-25 12:06:56,791 - src.main - INFO - Starting dYdX Trading Service...
web-app-1  | Starting lifespan event handler...
web-app-1  | Validating network configuration...
web-app-1  | 2025-10-25 12:06:56,791 - src.core.network_validator - INFO - development environment detected. Using testnet.
web-app-1  | 2025-10-25 12:06:56,791 - src.main - INFO - Network validation passed: testnet (dydx-testnet-1)
web-app-1  | 
web-app-1  | ============================================================
web-app-1  | dYdX Network Configuration
web-app-1  | ============================================================
web-app-1  | Environment: development
web-app-1  | Network Type: TESTNET
web-app-1  | Network ID: 11155111
web-app-1  | Chain ID: dydx-testnet-1
web-app-1  | REST URL: https://indexer.v4testnet.dydx.exchange
web-app-1  | WebSocket URL: wss://indexer.v4testnet.dydx.exchange/v4/ws
web-app-1  | Is Production: False
web-app-1  | ============================================================
web-app-1  | 
web-app-1  | ✅ Configuration is safe.
web-app-1  | 
web-app-1  | Validating application configuration...
web-app-1  | Configuration validation messages: []
web-app-1  | 2025-10-25 12:06:56,792 - src.main - INFO - Encryption manager initialized
web-app-1  | 2025-10-25 12:06:56,836 INFO sqlalchemy.engine.Engine select pg_catalog.version()
web-app-1  | 2025-10-25 12:06:56,836 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
web-app-1  | 2025-10-25 12:06:56,837 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:56,837 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:56,838 INFO sqlalchemy.engine.Engine select current_schema()
web-app-1  | 2025-10-25 12:06:56,838 - sqlalchemy.engine.Engine - INFO - select current_schema()
web-app-1  | 2025-10-25 12:06:56,838 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:56,838 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:56,838 INFO sqlalchemy.engine.Engine show standard_conforming_strings
web-app-1  | 2025-10-25 12:06:56,838 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
web-app-1  | 2025-10-25 12:06:56,838 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:06:56,838 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:06:56,839 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:56,839 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:56,841 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:56,841 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:56,841 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:56,841 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:56,842 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:56,842 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:56,842 INFO sqlalchemy.engine.Engine [cached since 0.001642s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:56,842 - sqlalchemy.engine.Engine - INFO - [cached since 0.001642s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:56,843 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:56,843 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:56,843 INFO sqlalchemy.engine.Engine [cached since 0.002137s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:56,843 - sqlalchemy.engine.Engine - INFO - [cached since 0.002137s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:56,843 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:56,843 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:06:56,843 INFO sqlalchemy.engine.Engine [cached since 0.002615s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:56,843 - sqlalchemy.engine.Engine - INFO - [cached since 0.002615s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:06:56,844 INFO sqlalchemy.engine.Engine COMMIT
web-app-1  | 2025-10-25 12:06:56,844 - sqlalchemy.engine.Engine - INFO - COMMIT
web-app-1  | 2025-10-25 12:06:56,845 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:56,845 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:56,845 INFO sqlalchemy.engine.Engine SELECT 1
web-app-1  | 2025-10-25 12:06:56,845 - sqlalchemy.engine.Engine - INFO - SELECT 1
web-app-1  | 2025-10-25 12:06:56,845 INFO sqlalchemy.engine.Engine [generated in 0.00012s] ()
web-app-1  | 2025-10-25 12:06:56,845 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
web-app-1  | 2025-10-25 12:06:56,846 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:56,846 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:56,846 - src.db.database - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:06:56,846 - src.main - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:06:56,846 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:56,846 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:56,846 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:06:56,846 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:06:56,847 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ()
web-app-1  | 2025-10-25 12:06:56,847 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ()
web-app-1  | 2025-10-25 12:06:56,847 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:56,847 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:56,847 - src.main - INFO - Database health check passed in 1.0ms
web-app-1  | 2025-10-25 12:06:56,848 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:56,848 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:06:56,851 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:06:56,851 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:06:56,851 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:06:56,851 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:06:56,852 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:06:56,852 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:06:56,852 - src.main - ERROR - Application startup failed: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | ERROR:    Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 526, in _prepare_and_execute
web-app-1  |     prepared_stmt, attributes = await adapt_connection._prepare(
web-app-1  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 773, in _prepare
web-app-1  |     prepared_stmt = await self._connection.prepare(
web-app-1  |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 636, in prepare
web-app-1  |     return await self._prepare(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 654, in _prepare
web-app-1  |     stmt = await self._get_statement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 433, in _get_statement
web-app-1  |     statement = await self._protocol.prepare(
web-app-1  |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "asyncpg/protocol/protocol.pyx", line 166, in prepare
web-app-1  | asyncpg.exceptions.UndefinedColumnError: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 677, in lifespan
web-app-1  |     async with self.lifespan_context(app) as maybe_state:
web-app-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__
web-app-1  |     return await anext(self.gen)
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/main.py", line 95, in lifespan
web-app-1  |     await create_sample_data()
web-app-1  |   File "/app/src/db/database.py", line 366, in create_sample_data
web-app-1  |     sample_user = await db_manager.get_user_by_wallet("0x1234567890123456789012345678901234567890")
web-app-1  |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/db/database.py", line 166, in get_user_by_wallet
web-app-1  |     result = await session.execute(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
web-app-1  |     result = await greenlet_spawn(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
web-app-1  |     result = context.throw(*sys.exc_info())
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
web-app-1  |     return self._execute_internal(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
web-app-1  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
web-app-1  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
web-app-1  |     result = conn.execute(
web-app-1  |              ^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
web-app-1  |     return meth(
web-app-1  |            ^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
web-app-1  |     return connection._execute_clauseelement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
web-app-1  |     ret = self._execute_context(
web-app-1  |           ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
web-app-1  |     return self._exec_single_context(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
web-app-1  |     self._handle_dbapi_exception(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
web-app-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | 
web-app-1  | ERROR:    Application startup failed. Exiting.
web-app-1  | /usr/local/lib/python3.12/site-packages/web3/__init__.py:2: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
web-app-1  |   import pkg_resources
web-app-1  | Node URL should not contain http(s)://. Stripping the prefix. In the future, consider providing the URL without the http(s) prefix.
web-app-1  | 2025-10-25 12:07:05,001 - src.core.logging_config - INFO - Logging configuration initialized
web-app-1  | Including API routers...
web-app-1  | Auth router included
web-app-1  | User router included
web-app-1  | Trading router included
web-app-1  | Webhooks router included
web-app-1  | WebSocket router included
web-app-1  | Enhanced WebSocket router included
web-app-1  | Health check router included
web-app-1  | Equity curve router included
web-app-1  | 2025-10-25 12:07:05,010 - src.main - INFO - CORS configured for origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:5173']
web-app-1  | Adding SlowAPI middleware...
web-app-1  | SlowAPI middleware added
web-app-1  | Rate limit exception handler added
web-app-1  | INFO:     Started server process [1]
web-app-1  | INFO:     Waiting for application startup.
web-app-1  | Starting dYdX Trading Service...
web-app-1  | 2025-10-25 12:07:05,012 - src.main - INFO - Starting dYdX Trading Service...
web-app-1  | Starting lifespan event handler...
web-app-1  | Validating network configuration...
web-app-1  | 2025-10-25 12:07:05,013 - src.core.network_validator - INFO - development environment detected. Using testnet.
web-app-1  | 2025-10-25 12:07:05,013 - src.main - INFO - Network validation passed: testnet (dydx-testnet-1)
web-app-1  | 
web-app-1  | ============================================================
web-app-1  | dYdX Network Configuration
web-app-1  | ============================================================
web-app-1  | Environment: development
web-app-1  | Network Type: TESTNET
web-app-1  | Network ID: 11155111
web-app-1  | Chain ID: dydx-testnet-1
web-app-1  | REST URL: https://indexer.v4testnet.dydx.exchange
web-app-1  | WebSocket URL: wss://indexer.v4testnet.dydx.exchange/v4/ws
web-app-1  | Is Production: False
web-app-1  | ============================================================
web-app-1  | 
web-app-1  | ✅ Configuration is safe.
web-app-1  | 
web-app-1  | Validating application configuration...
web-app-1  | Configuration validation messages: []
web-app-1  | 2025-10-25 12:07:05,013 - src.main - INFO - Encryption manager initialized
web-app-1  | 2025-10-25 12:07:05,054 INFO sqlalchemy.engine.Engine select pg_catalog.version()
web-app-1  | 2025-10-25 12:07:05,054 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
web-app-1  | 2025-10-25 12:07:05,054 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:07:05,054 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:07:05,055 INFO sqlalchemy.engine.Engine select current_schema()
web-app-1  | 2025-10-25 12:07:05,055 - sqlalchemy.engine.Engine - INFO - select current_schema()
web-app-1  | 2025-10-25 12:07:05,055 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:07:05,055 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:07:05,056 INFO sqlalchemy.engine.Engine show standard_conforming_strings
web-app-1  | 2025-10-25 12:07:05,056 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
web-app-1  | 2025-10-25 12:07:05,056 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:07:05,056 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:07:05,057 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:05,057 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:05,059 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:05,059 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:05,059 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:05,059 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:05,061 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:05,061 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:05,061 INFO sqlalchemy.engine.Engine [cached since 0.00168s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:05,061 - sqlalchemy.engine.Engine - INFO - [cached since 0.00168s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:05,061 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:05,061 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:05,061 INFO sqlalchemy.engine.Engine [cached since 0.002211s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:05,061 - sqlalchemy.engine.Engine - INFO - [cached since 0.002211s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:05,062 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:05,062 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:05,062 INFO sqlalchemy.engine.Engine [cached since 0.002728s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:05,062 - sqlalchemy.engine.Engine - INFO - [cached since 0.002728s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:05,062 INFO sqlalchemy.engine.Engine COMMIT
web-app-1  | 2025-10-25 12:07:05,062 - sqlalchemy.engine.Engine - INFO - COMMIT
web-app-1  | 2025-10-25 12:07:05,063 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:05,063 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:05,063 INFO sqlalchemy.engine.Engine SELECT 1
web-app-1  | 2025-10-25 12:07:05,063 - sqlalchemy.engine.Engine - INFO - SELECT 1
web-app-1  | 2025-10-25 12:07:05,063 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ()
web-app-1  | 2025-10-25 12:07:05,063 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
web-app-1  | 2025-10-25 12:07:05,063 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:07:05,063 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:07:05,064 - src.db.database - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:07:05,064 - src.main - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:07:05,064 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:05,064 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:05,064 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:07:05,064 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:07:05,065 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ()
web-app-1  | 2025-10-25 12:07:05,065 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ()
web-app-1  | 2025-10-25 12:07:05,065 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:07:05,065 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:07:05,065 - src.main - INFO - Database health check passed in 1.0ms
web-app-1  | 2025-10-25 12:07:05,066 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:05,066 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:05,070 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:07:05,070 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:07:05,070 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:07:05,070 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:07:05,071 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:07:05,071 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:07:05,071 - src.main - ERROR - Application startup failed: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | ERROR:    Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 526, in _prepare_and_execute
web-app-1  |     prepared_stmt, attributes = await adapt_connection._prepare(
web-app-1  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 773, in _prepare
web-app-1  |     prepared_stmt = await self._connection.prepare(
web-app-1  |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 636, in prepare
web-app-1  |     return await self._prepare(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 654, in _prepare
web-app-1  |     stmt = await self._get_statement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 433, in _get_statement
web-app-1  |     statement = await self._protocol.prepare(
web-app-1  |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "asyncpg/protocol/protocol.pyx", line 166, in prepare
web-app-1  | asyncpg.exceptions.UndefinedColumnError: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 677, in lifespan
web-app-1  |     async with self.lifespan_context(app) as maybe_state:
web-app-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__
web-app-1  |     return await anext(self.gen)
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/main.py", line 95, in lifespan
web-app-1  |     await create_sample_data()
web-app-1  |   File "/app/src/db/database.py", line 366, in create_sample_data
web-app-1  |     sample_user = await db_manager.get_user_by_wallet("0x1234567890123456789012345678901234567890")
web-app-1  |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/db/database.py", line 166, in get_user_by_wallet
web-app-1  |     result = await session.execute(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
web-app-1  |     result = await greenlet_spawn(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
web-app-1  |     result = context.throw(*sys.exc_info())
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
web-app-1  |     return self._execute_internal(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
web-app-1  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
web-app-1  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
web-app-1  |     result = conn.execute(
web-app-1  |              ^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
web-app-1  |     return meth(
web-app-1  |            ^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
web-app-1  |     return connection._execute_clauseelement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
web-app-1  |     ret = self._execute_context(
web-app-1  |           ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
web-app-1  |     return self._exec_single_context(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
web-app-1  |     self._handle_dbapi_exception(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
web-app-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | 
web-app-1  | ERROR:    Application startup failed. Exiting.
web-app-1  | /usr/local/lib/python3.12/site-packages/web3/__init__.py:2: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
web-app-1  |   import pkg_resources
web-app-1  | Node URL should not contain http(s)://. Stripping the prefix. In the future, consider providing the URL without the http(s) prefix.
web-app-1  | 2025-10-25 12:07:16,755 - src.core.logging_config - INFO - Logging configuration initialized
web-app-1  | Including API routers...
web-app-1  | Auth router included
web-app-1  | User router included
web-app-1  | Trading router included
web-app-1  | Webhooks router included
web-app-1  | WebSocket router included
web-app-1  | Enhanced WebSocket router included
web-app-1  | Health check router included
web-app-1  | Equity curve router included
web-app-1  | 2025-10-25 12:07:16,765 - src.main - INFO - CORS configured for origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:5173']
web-app-1  | Adding SlowAPI middleware...
web-app-1  | SlowAPI middleware added
web-app-1  | Rate limit exception handler added
web-app-1  | INFO:     Started server process [1]
web-app-1  | INFO:     Waiting for application startup.
web-app-1  | Starting dYdX Trading Service...
web-app-1  | 2025-10-25 12:07:16,768 - src.main - INFO - Starting dYdX Trading Service...
web-app-1  | Starting lifespan event handler...
web-app-1  | Validating network configuration...
web-app-1  | 2025-10-25 12:07:16,768 - src.core.network_validator - INFO - development environment detected. Using testnet.
web-app-1  | 2025-10-25 12:07:16,768 - src.main - INFO - Network validation passed: testnet (dydx-testnet-1)
web-app-1  | 
web-app-1  | ============================================================
web-app-1  | dYdX Network Configuration
web-app-1  | ============================================================
web-app-1  | Environment: development
web-app-1  | Network Type: TESTNET
web-app-1  | Network ID: 11155111
web-app-1  | Chain ID: dydx-testnet-1
web-app-1  | REST URL: https://indexer.v4testnet.dydx.exchange
web-app-1  | WebSocket URL: wss://indexer.v4testnet.dydx.exchange/v4/ws
web-app-1  | Is Production: False
web-app-1  | ============================================================
web-app-1  | 
web-app-1  | ✅ Configuration is safe.
web-app-1  | 
web-app-1  | Validating application configuration...
web-app-1  | Configuration validation messages: []
web-app-1  | 2025-10-25 12:07:16,769 - src.main - INFO - Encryption manager initialized
web-app-1  | 2025-10-25 12:07:16,826 INFO sqlalchemy.engine.Engine select pg_catalog.version()
web-app-1  | 2025-10-25 12:07:16,826 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
web-app-1  | 2025-10-25 12:07:16,827 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:07:16,827 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:07:16,828 INFO sqlalchemy.engine.Engine select current_schema()
web-app-1  | 2025-10-25 12:07:16,828 - sqlalchemy.engine.Engine - INFO - select current_schema()
web-app-1  | 2025-10-25 12:07:16,828 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:07:16,828 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:07:16,828 INFO sqlalchemy.engine.Engine show standard_conforming_strings
web-app-1  | 2025-10-25 12:07:16,828 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
web-app-1  | 2025-10-25 12:07:16,829 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:07:16,829 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:07:16,829 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:16,829 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:16,832 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:16,832 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:16,832 INFO sqlalchemy.engine.Engine [generated in 0.00026s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:16,832 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:16,834 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:16,834 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:16,834 INFO sqlalchemy.engine.Engine [cached since 0.00206s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:16,834 - sqlalchemy.engine.Engine - INFO - [cached since 0.00206s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:16,834 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:16,834 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:16,834 INFO sqlalchemy.engine.Engine [cached since 0.002594s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:16,834 - sqlalchemy.engine.Engine - INFO - [cached since 0.002594s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:16,835 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:16,835 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:16,835 INFO sqlalchemy.engine.Engine [cached since 0.003005s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:16,835 - sqlalchemy.engine.Engine - INFO - [cached since 0.003005s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:16,835 INFO sqlalchemy.engine.Engine COMMIT
web-app-1  | 2025-10-25 12:07:16,835 - sqlalchemy.engine.Engine - INFO - COMMIT
web-app-1  | 2025-10-25 12:07:16,836 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:16,836 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:16,837 INFO sqlalchemy.engine.Engine SELECT 1
web-app-1  | 2025-10-25 12:07:16,837 - sqlalchemy.engine.Engine - INFO - SELECT 1
web-app-1  | 2025-10-25 12:07:16,837 INFO sqlalchemy.engine.Engine [generated in 0.00010s] ()
web-app-1  | 2025-10-25 12:07:16,837 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ()
web-app-1  | 2025-10-25 12:07:16,837 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:07:16,837 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:07:16,837 - src.db.database - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:07:16,838 - src.main - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:07:16,838 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:16,838 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:16,838 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:07:16,838 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:07:16,839 INFO sqlalchemy.engine.Engine [generated in 0.00031s] ()
web-app-1  | 2025-10-25 12:07:16,839 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ()
web-app-1  | 2025-10-25 12:07:16,839 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:07:16,839 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:07:16,840 - src.main - INFO - Database health check passed in 2.0ms
web-app-1  | 2025-10-25 12:07:16,841 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:16,841 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:16,847 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:07:16,847 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:07:16,847 INFO sqlalchemy.engine.Engine [generated in 0.00021s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:07:16,847 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:07:16,848 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:07:16,848 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:07:16,848 - src.main - ERROR - Application startup failed: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | ERROR:    Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 526, in _prepare_and_execute
web-app-1  |     prepared_stmt, attributes = await adapt_connection._prepare(
web-app-1  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 773, in _prepare
web-app-1  |     prepared_stmt = await self._connection.prepare(
web-app-1  |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 636, in prepare
web-app-1  |     return await self._prepare(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 654, in _prepare
web-app-1  |     stmt = await self._get_statement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 433, in _get_statement
web-app-1  |     statement = await self._protocol.prepare(
web-app-1  |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "asyncpg/protocol/protocol.pyx", line 166, in prepare
web-app-1  | asyncpg.exceptions.UndefinedColumnError: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 677, in lifespan
web-app-1  |     async with self.lifespan_context(app) as maybe_state:
web-app-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__
web-app-1  |     return await anext(self.gen)
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/main.py", line 95, in lifespan
web-app-1  |     await create_sample_data()
web-app-1  |   File "/app/src/db/database.py", line 366, in create_sample_data
web-app-1  |     sample_user = await db_manager.get_user_by_wallet("0x1234567890123456789012345678901234567890")
web-app-1  |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/db/database.py", line 166, in get_user_by_wallet
web-app-1  |     result = await session.execute(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
web-app-1  |     result = await greenlet_spawn(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
web-app-1  |     result = context.throw(*sys.exc_info())
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
web-app-1  |     return self._execute_internal(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
web-app-1  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
web-app-1  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
web-app-1  |     result = conn.execute(
web-app-1  |              ^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
web-app-1  |     return meth(
web-app-1  |            ^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
web-app-1  |     return connection._execute_clauseelement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
web-app-1  |     ret = self._execute_context(
web-app-1  |           ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
web-app-1  |     return self._exec_single_context(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
web-app-1  |     self._handle_dbapi_exception(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
web-app-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | 
web-app-1  | ERROR:    Application startup failed. Exiting.
web-app-1  | /usr/local/lib/python3.12/site-packages/web3/__init__.py:2: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
web-app-1  |   import pkg_resources
web-app-1  | Node URL should not contain http(s)://. Stripping the prefix. In the future, consider providing the URL without the http(s) prefix.
web-app-1  | 2025-10-25 12:07:34,709 - src.core.logging_config - INFO - Logging configuration initialized
web-app-1  | Including API routers...
web-app-1  | Auth router included
web-app-1  | User router included
web-app-1  | Trading router included
web-app-1  | Webhooks router included
web-app-1  | WebSocket router included
web-app-1  | Enhanced WebSocket router included
web-app-1  | Health check router included
web-app-1  | Equity curve router included
web-app-1  | 2025-10-25 12:07:34,718 - src.main - INFO - CORS configured for origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:5173']
web-app-1  | Adding SlowAPI middleware...
web-app-1  | SlowAPI middleware added
web-app-1  | Rate limit exception handler added
web-app-1  | INFO:     Started server process [1]
web-app-1  | INFO:     Waiting for application startup.
web-app-1  | Starting dYdX Trading Service...
web-app-1  | 2025-10-25 12:07:34,721 - src.main - INFO - Starting dYdX Trading Service...
web-app-1  | Starting lifespan event handler...
web-app-1  | Validating network configuration...
web-app-1  | 2025-10-25 12:07:34,721 - src.core.network_validator - INFO - development environment detected. Using testnet.
web-app-1  | 2025-10-25 12:07:34,721 - src.main - INFO - Network validation passed: testnet (dydx-testnet-1)
web-app-1  | 
web-app-1  | ============================================================
web-app-1  | dYdX Network Configuration
web-app-1  | ============================================================
web-app-1  | Environment: development
web-app-1  | Network Type: TESTNET
web-app-1  | Network ID: 11155111
web-app-1  | Chain ID: dydx-testnet-1
web-app-1  | REST URL: https://indexer.v4testnet.dydx.exchange
web-app-1  | WebSocket URL: wss://indexer.v4testnet.dydx.exchange/v4/ws
web-app-1  | Is Production: False
web-app-1  | ============================================================
web-app-1  | 
web-app-1  | ✅ Configuration is safe.
web-app-1  | 
web-app-1  | Validating application configuration...
web-app-1  | Configuration validation messages: []
web-app-1  | 2025-10-25 12:07:34,721 - src.main - INFO - Encryption manager initialized
web-app-1  | 2025-10-25 12:07:34,768 INFO sqlalchemy.engine.Engine select pg_catalog.version()
web-app-1  | 2025-10-25 12:07:34,768 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
web-app-1  | 2025-10-25 12:07:34,768 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:07:34,768 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:07:34,769 INFO sqlalchemy.engine.Engine select current_schema()
web-app-1  | 2025-10-25 12:07:34,769 - sqlalchemy.engine.Engine - INFO - select current_schema()
web-app-1  | 2025-10-25 12:07:34,769 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:07:34,769 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:07:34,770 INFO sqlalchemy.engine.Engine show standard_conforming_strings
web-app-1  | 2025-10-25 12:07:34,770 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
web-app-1  | 2025-10-25 12:07:34,770 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:07:34,770 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:07:34,771 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:34,771 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:34,772 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:34,772 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:34,773 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:34,773 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:34,774 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:34,774 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:34,774 INFO sqlalchemy.engine.Engine [cached since 0.001491s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:34,774 - sqlalchemy.engine.Engine - INFO - [cached since 0.001491s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:34,774 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:34,774 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:34,774 INFO sqlalchemy.engine.Engine [cached since 0.001921s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:34,774 - sqlalchemy.engine.Engine - INFO - [cached since 0.001921s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:34,775 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:34,775 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:07:34,775 INFO sqlalchemy.engine.Engine [cached since 0.00238s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:34,775 - sqlalchemy.engine.Engine - INFO - [cached since 0.00238s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:07:34,775 INFO sqlalchemy.engine.Engine COMMIT
web-app-1  | 2025-10-25 12:07:34,775 - sqlalchemy.engine.Engine - INFO - COMMIT
web-app-1  | 2025-10-25 12:07:34,776 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:34,776 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:34,776 INFO sqlalchemy.engine.Engine SELECT 1
web-app-1  | 2025-10-25 12:07:34,776 - sqlalchemy.engine.Engine - INFO - SELECT 1
web-app-1  | 2025-10-25 12:07:34,776 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ()
web-app-1  | 2025-10-25 12:07:34,776 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
web-app-1  | 2025-10-25 12:07:34,777 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:07:34,777 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:07:34,777 - src.db.database - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:07:34,777 - src.main - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:07:34,777 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:34,777 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:34,778 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:07:34,778 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:07:34,778 INFO sqlalchemy.engine.Engine [generated in 0.00012s] ()
web-app-1  | 2025-10-25 12:07:34,778 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] ()
web-app-1  | 2025-10-25 12:07:34,778 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:07:34,778 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:07:34,778 - src.main - INFO - Database health check passed in 1.0ms
web-app-1  | 2025-10-25 12:07:34,779 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:34,779 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:07:34,783 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:07:34,783 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:07:34,783 INFO sqlalchemy.engine.Engine [generated in 0.00021s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:07:34,783 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:07:34,784 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:07:34,784 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:07:34,785 - src.main - ERROR - Application startup failed: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | ERROR:    Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 526, in _prepare_and_execute
web-app-1  |     prepared_stmt, attributes = await adapt_connection._prepare(
web-app-1  |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 773, in _prepare
web-app-1  |     prepared_stmt = await self._connection.prepare(
web-app-1  |                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 636, in prepare
web-app-1  |     return await self._prepare(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 654, in _prepare
web-app-1  |     stmt = await self._get_statement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/asyncpg/connection.py", line 433, in _get_statement
web-app-1  |     statement = await self._protocol.prepare(
web-app-1  |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "asyncpg/protocol/protocol.pyx", line 166, in prepare
web-app-1  | asyncpg.exceptions.UndefinedColumnError: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | 
web-app-1  | The above exception was the direct cause of the following exception:
web-app-1  | 
web-app-1  | Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 677, in lifespan
web-app-1  |     async with self.lifespan_context(app) as maybe_state:
web-app-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__
web-app-1  |     return await anext(self.gen)
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/main.py", line 95, in lifespan
web-app-1  |     await create_sample_data()
web-app-1  |   File "/app/src/db/database.py", line 366, in create_sample_data
web-app-1  |     sample_user = await db_manager.get_user_by_wallet("0x1234567890123456789012345678901234567890")
web-app-1  |                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/db/database.py", line 166, in get_user_by_wallet
web-app-1  |     result = await session.execute(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
web-app-1  |     result = await greenlet_spawn(
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
web-app-1  |     result = context.throw(*sys.exc_info())
web-app-1  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
web-app-1  |     return self._execute_internal(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
web-app-1  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
web-app-1  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
web-app-1  |     result = conn.execute(
web-app-1  |              ^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
web-app-1  |     return meth(
web-app-1  |            ^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 526, in _execute_on_connection
web-app-1  |     return connection._execute_clauseelement(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
web-app-1  |     ret = self._execute_context(
web-app-1  |           ^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
web-app-1  |     return self._exec_single_context(
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
web-app-1  |     self._handle_dbapi_exception(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
web-app-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
web-app-1  |     self.dialect.do_execute(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 951, in do_execute
web-app-1  |     cursor.execute(statement, parameters)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
web-app-1  |     self._adapt_connection.await_(
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
web-app-1  |     return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
web-app-1  |     value = await result
web-app-1  |             ^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
web-app-1  |     self._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
web-app-1  |     self._adapt_connection._handle_exception(error)
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
web-app-1  |     raise translated_error from error
web-app-1  | sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column users.encrypted_dydx_testnet_mnemonic does not exist
web-app-1  | [SQL: SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR]
web-app-1  | [parameters: ('0x1234567890123456789012345678901234567890',)]
web-app-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
web-app-1  | 
web-app-1  | ERROR:    Application startup failed. Exiting.
web-app-1  | /usr/local/lib/python3.12/site-packages/web3/__init__.py:2: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
web-app-1  |   import pkg_resources
web-app-1  | Node URL should not contain http(s)://. Stripping the prefix. In the future, consider providing the URL without the http(s) prefix.
web-app-1  | 2025-10-25 12:08:06,105 - src.core.logging_config - INFO - Logging configuration initialized
web-app-1  | Including API routers...
web-app-1  | Auth router included
web-app-1  | User router included
web-app-1  | Trading router included
web-app-1  | Webhooks router included
web-app-1  | WebSocket router included
web-app-1  | Enhanced WebSocket router included
web-app-1  | Health check router included
web-app-1  | Equity curve router included
web-app-1  | 2025-10-25 12:08:06,115 - src.main - INFO - CORS configured for origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:5173']
web-app-1  | Adding SlowAPI middleware...
web-app-1  | SlowAPI middleware added
web-app-1  | Rate limit exception handler added
web-app-1  | INFO:     Started server process [1]
web-app-1  | INFO:     Waiting for application startup.
web-app-1  | Starting dYdX Trading Service...
web-app-1  | 2025-10-25 12:08:06,119 - src.main - INFO - Starting dYdX Trading Service...
web-app-1  | Starting lifespan event handler...
web-app-1  | Validating network configuration...
web-app-1  | 2025-10-25 12:08:06,119 - src.core.network_validator - INFO - development environment detected. Using testnet.
web-app-1  | 2025-10-25 12:08:06,119 - src.main - INFO - Network validation passed: testnet (dydx-testnet-1)
web-app-1  | 
web-app-1  | ============================================================
web-app-1  | dYdX Network Configuration
web-app-1  | ============================================================
web-app-1  | Environment: development
web-app-1  | Network Type: TESTNET
web-app-1  | Network ID: 11155111
web-app-1  | Chain ID: dydx-testnet-1
web-app-1  | REST URL: https://indexer.v4testnet.dydx.exchange
web-app-1  | WebSocket URL: wss://indexer.v4testnet.dydx.exchange/v4/ws
web-app-1  | Is Production: False
web-app-1  | ============================================================
web-app-1  | 
web-app-1  | ✅ Configuration is safe.
web-app-1  | 
web-app-1  | Validating application configuration...
web-app-1  | Configuration validation messages: []
web-app-1  | 2025-10-25 12:08:06,119 - src.main - INFO - Encryption manager initialized
web-app-1  | 2025-10-25 12:08:06,175 INFO sqlalchemy.engine.Engine select pg_catalog.version()
web-app-1  | 2025-10-25 12:08:06,175 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
web-app-1  | 2025-10-25 12:08:06,175 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:08:06,175 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:08:06,176 INFO sqlalchemy.engine.Engine select current_schema()
web-app-1  | 2025-10-25 12:08:06,176 - sqlalchemy.engine.Engine - INFO - select current_schema()
web-app-1  | 2025-10-25 12:08:06,176 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:08:06,176 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:08:06,177 INFO sqlalchemy.engine.Engine show standard_conforming_strings
web-app-1  | 2025-10-25 12:08:06,177 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
web-app-1  | 2025-10-25 12:08:06,177 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:08:06,177 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:08:06,178 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:08:06,178 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:08:06,180 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:08:06,180 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:08:06,180 INFO sqlalchemy.engine.Engine [generated in 0.00021s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:08:06,180 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:08:06,181 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:08:06,181 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:08:06,182 INFO sqlalchemy.engine.Engine [cached since 0.00172s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:08:06,182 - sqlalchemy.engine.Engine - INFO - [cached since 0.00172s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:08:06,182 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:08:06,182 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:08:06,182 INFO sqlalchemy.engine.Engine [cached since 0.002149s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:08:06,182 - sqlalchemy.engine.Engine - INFO - [cached since 0.002149s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:08:06,182 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:08:06,182 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:08:06,182 INFO sqlalchemy.engine.Engine [cached since 0.002555s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:08:06,182 - sqlalchemy.engine.Engine - INFO - [cached since 0.002555s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:08:06,183 INFO sqlalchemy.engine.Engine COMMIT
web-app-1  | 2025-10-25 12:08:06,183 - sqlalchemy.engine.Engine - INFO - COMMIT
web-app-1  | 2025-10-25 12:08:06,184 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:08:06,184 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:08:06,184 INFO sqlalchemy.engine.Engine SELECT 1
web-app-1  | 2025-10-25 12:08:06,184 - sqlalchemy.engine.Engine - INFO - SELECT 1
web-app-1  | 2025-10-25 12:08:06,184 INFO sqlalchemy.engine.Engine [generated in 0.00020s] ()
web-app-1  | 2025-10-25 12:08:06,184 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ()
web-app-1  | 2025-10-25 12:08:06,185 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:08:06,185 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:08:06,185 - src.db.database - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:08:06,185 - src.main - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:08:06,186 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:08:06,186 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:08:06,186 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:08:06,186 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:08:06,186 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ()
web-app-1  | 2025-10-25 12:08:06,186 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
web-app-1  | 2025-10-25 12:08:06,186 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:08:06,186 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:08:06,187 - src.main - INFO - Database health check passed in 1.0ms
web-app-1  | Initializing error handler and circuit breakers...
web-app-1  | 2025-10-25 12:08:06,187 - src.main - INFO - Error handler and circuit breakers initialized
web-app-1  | 2025-10-25 12:08:06,187 - src.main - ERROR - Failed to initialize position monitoring worker: '_GeneratorContextManager' object is not an iterator
web-app-1  | 2025-10-25 12:08:06,189 - src.main - WARNING - Application will continue without position monitoring worker
web-app-1  | 2025-10-25 12:08:06,189 - src.main - INFO - dYdX Trading Service startup completed successfully
web-app-1  | INFO:     Application startup complete.
web-app-1  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
web-app-1  | 2025-10-25 12:08:07,913 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:08:07,913 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:08:07,913 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:08:07,913 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:08:07,914 INFO sqlalchemy.engine.Engine [cached since 1.728s ago] ()
web-app-1  | 2025-10-25 12:08:07,914 - sqlalchemy.engine.Engine - INFO - [cached since 1.728s ago] ()
web-app-1  | 2025-10-25 12:08:07,914 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:08:07,914 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:54542 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:08:38,003 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:08:38,003 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:08:38,007 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:08:38,007 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:08:38,008 INFO sqlalchemy.engine.Engine [cached since 31.82s ago] ()
web-app-1  | 2025-10-25 12:08:38,008 - sqlalchemy.engine.Engine - INFO - [cached since 31.82s ago] ()
web-app-1  | 2025-10-25 12:08:38,010 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:08:38,010 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:58494 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:09:08,109 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:09:08,109 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:09:08,112 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:09:08,112 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:09:08,112 INFO sqlalchemy.engine.Engine [cached since 61.93s ago] ()
web-app-1  | 2025-10-25 12:09:08,112 - sqlalchemy.engine.Engine - INFO - [cached since 61.93s ago] ()
web-app-1  | 2025-10-25 12:09:08,114 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:09:08,114 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:33184 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:09:38,203 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:09:38,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:09:38,206 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:09:38,206 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:09:38,206 INFO sqlalchemy.engine.Engine [cached since 92.02s ago] ()
web-app-1  | 2025-10-25 12:09:38,206 - sqlalchemy.engine.Engine - INFO - [cached since 92.02s ago] ()
web-app-1  | 2025-10-25 12:09:38,208 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:09:38,208 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:53256 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:10:08,326 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:10:08,326 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:10:08,330 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:10:08,330 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:10:08,330 INFO sqlalchemy.engine.Engine [cached since 122.1s ago] ()
web-app-1  | 2025-10-25 12:10:08,330 - sqlalchemy.engine.Engine - INFO - [cached since 122.1s ago] ()
web-app-1  | 2025-10-25 12:10:08,333 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:10:08,333 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:56366 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:10:38,431 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:10:38,431 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:10:38,440 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:10:38,440 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:10:38,440 INFO sqlalchemy.engine.Engine [cached since 152.3s ago] ()
web-app-1  | 2025-10-25 12:10:38,440 - sqlalchemy.engine.Engine - INFO - [cached since 152.3s ago] ()
web-app-1  | 2025-10-25 12:10:38,442 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:10:38,442 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:46556 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:11:08,570 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:11:08,570 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:11:08,578 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:11:08,578 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:11:08,578 INFO sqlalchemy.engine.Engine [cached since 182.4s ago] ()
web-app-1  | 2025-10-25 12:11:08,578 - sqlalchemy.engine.Engine - INFO - [cached since 182.4s ago] ()
web-app-1  | 2025-10-25 12:11:08,580 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:11:08,580 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:59566 - "GET / HTTP/1.1" 200 OK
web-app-1  | INFO:     Shutting down
web-app-1  | INFO:     Waiting for application shutdown.
web-app-1  | 2025-10-25 12:11:11,317 - src.main - INFO - Shutting down dYdX Trading Service...
web-app-1  | 2025-10-25 12:11:11,333 - src.db.database - INFO - Database connections closed
web-app-1  | 2025-10-25 12:11:11,334 - src.main - INFO - Database connections closed
web-app-1  | 2025-10-25 12:11:11,334 - src.main - INFO - dYdX Trading Service shutdown completed
web-app-1  | INFO:     Application shutdown complete.
web-app-1  | INFO:     Finished server process [1]
web-app-1  | /usr/local/lib/python3.12/site-packages/web3/__init__.py:2: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
web-app-1  |   import pkg_resources
web-app-1  | Node URL should not contain http(s)://. Stripping the prefix. In the future, consider providing the URL without the http(s) prefix.
web-app-1  | 2025-10-25 12:11:15,082 - src.core.logging_config - INFO - Logging configuration initialized
web-app-1  | Including API routers...
web-app-1  | Auth router included
web-app-1  | User router included
web-app-1  | Trading router included
web-app-1  | Webhooks router included
web-app-1  | WebSocket router included
web-app-1  | Enhanced WebSocket router included
web-app-1  | Health check router included
web-app-1  | Equity curve router included
web-app-1  | 2025-10-25 12:11:15,091 - src.main - INFO - CORS configured for origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:5173']
web-app-1  | Adding SlowAPI middleware...
web-app-1  | SlowAPI middleware added
web-app-1  | Rate limit exception handler added
web-app-1  | INFO:     Started server process [1]
web-app-1  | INFO:     Waiting for application startup.
web-app-1  | Starting dYdX Trading Service...
web-app-1  | 2025-10-25 12:11:15,094 - src.main - INFO - Starting dYdX Trading Service...
web-app-1  | Starting lifespan event handler...
web-app-1  | Validating network configuration...
web-app-1  | 2025-10-25 12:11:15,094 - src.core.network_validator - INFO - development environment detected. Using testnet.
web-app-1  | 2025-10-25 12:11:15,094 - src.main - INFO - Network validation passed: testnet (dydx-testnet-1)
web-app-1  | 
web-app-1  | ============================================================
web-app-1  | dYdX Network Configuration
web-app-1  | ============================================================
web-app-1  | Environment: development
web-app-1  | Network Type: TESTNET
web-app-1  | Network ID: 11155111
web-app-1  | Chain ID: dydx-testnet-1
web-app-1  | REST URL: https://indexer.v4testnet.dydx.exchange
web-app-1  | WebSocket URL: wss://indexer.v4testnet.dydx.exchange/v4/ws
web-app-1  | Is Production: False
web-app-1  | ============================================================
web-app-1  | 
web-app-1  | ✅ Configuration is safe.
web-app-1  | 
web-app-1  | Validating application configuration...
web-app-1  | Configuration validation messages: []
web-app-1  | 2025-10-25 12:11:15,095 - src.main - INFO - Encryption manager initialized
web-app-1  | 2025-10-25 12:11:15,142 INFO sqlalchemy.engine.Engine select pg_catalog.version()
web-app-1  | 2025-10-25 12:11:15,142 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
web-app-1  | 2025-10-25 12:11:15,142 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:11:15,142 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:11:15,143 INFO sqlalchemy.engine.Engine select current_schema()
web-app-1  | 2025-10-25 12:11:15,143 - sqlalchemy.engine.Engine - INFO - select current_schema()
web-app-1  | 2025-10-25 12:11:15,144 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:11:15,144 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:11:15,144 INFO sqlalchemy.engine.Engine show standard_conforming_strings
web-app-1  | 2025-10-25 12:11:15,144 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
web-app-1  | 2025-10-25 12:11:15,144 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:11:15,144 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:11:15,145 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:11:15,145 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:11:15,147 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:11:15,147 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:11:15,147 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:11:15,147 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:11:15,148 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:11:15,148 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:11:15,148 INFO sqlalchemy.engine.Engine [cached since 0.00151s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:11:15,148 - sqlalchemy.engine.Engine - INFO - [cached since 0.00151s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:11:15,149 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:11:15,149 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:11:15,149 INFO sqlalchemy.engine.Engine [cached since 0.001915s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:11:15,149 - sqlalchemy.engine.Engine - INFO - [cached since 0.001915s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:11:15,149 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:11:15,149 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:11:15,149 INFO sqlalchemy.engine.Engine [cached since 0.00229s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:11:15,149 - sqlalchemy.engine.Engine - INFO - [cached since 0.00229s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:11:15,149 INFO sqlalchemy.engine.Engine COMMIT
web-app-1  | 2025-10-25 12:11:15,149 - sqlalchemy.engine.Engine - INFO - COMMIT
web-app-1  | 2025-10-25 12:11:15,150 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:11:15,150 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:11:15,150 INFO sqlalchemy.engine.Engine SELECT 1
web-app-1  | 2025-10-25 12:11:15,150 - sqlalchemy.engine.Engine - INFO - SELECT 1
web-app-1  | 2025-10-25 12:11:15,151 INFO sqlalchemy.engine.Engine [generated in 0.00017s] ()
web-app-1  | 2025-10-25 12:11:15,151 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ()
web-app-1  | 2025-10-25 12:11:15,151 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:11:15,151 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:11:15,151 - src.db.database - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:11:15,151 - src.main - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:11:15,152 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:11:15,152 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:11:15,152 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:11:15,152 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:11:15,152 INFO sqlalchemy.engine.Engine [generated in 0.00019s] ()
web-app-1  | 2025-10-25 12:11:15,152 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
web-app-1  | 2025-10-25 12:11:15,152 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:11:15,152 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:11:15,153 - src.main - INFO - Database health check passed in 1.0ms
web-app-1  | Initializing error handler and circuit breakers...
web-app-1  | 2025-10-25 12:11:15,153 - src.main - INFO - Error handler and circuit breakers initialized
web-app-1  | 2025-10-25 12:11:15,153 - src.main - ERROR - Failed to initialize position monitoring worker: '_GeneratorContextManager' object is not an iterator
web-app-1  | 2025-10-25 12:11:15,153 - src.main - WARNING - Application will continue without position monitoring worker
web-app-1  | 2025-10-25 12:11:15,153 - src.main - INFO - dYdX Trading Service startup completed successfully
web-app-1  | INFO:     Application startup complete.
web-app-1  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
web-app-1  | 2025-10-25 12:11:17,545 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:11:17,545 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:11:17,545 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:11:17,545 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:11:17,546 INFO sqlalchemy.engine.Engine [cached since 2.394s ago] ()
web-app-1  | 2025-10-25 12:11:17,546 - sqlalchemy.engine.Engine - INFO - [cached since 2.394s ago] ()
web-app-1  | 2025-10-25 12:11:17,546 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:11:17,546 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:59582 - "GET / HTTP/1.1" 200 OK
web-app-1  | INFO:     192.168.65.1:51996 - "GET /login HTTP/1.1" 200 OK
web-app-1  | INFO:     192.168.65.1:51996 - "GET /css/output.css HTTP/1.1" 200 OK
web-app-1  | INFO:     192.168.65.1:33847 - "GET /js/auth.js?v=3.0 HTTP/1.1" 200 OK
web-app-1  | INFO:     192.168.65.1:33847 - "GET /favicon.ico HTTP/1.1" 404 Not Found
web-app-1  | 2025-10-25 12:11:47,622 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:11:47,622 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:11:47,625 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:11:47,625 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:11:47,625 INFO sqlalchemy.engine.Engine [cached since 32.47s ago] ()
web-app-1  | 2025-10-25 12:11:47,625 - sqlalchemy.engine.Engine - INFO - [cached since 32.47s ago] ()
web-app-1  | 2025-10-25 12:11:47,628 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:11:47,628 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:56166 - "GET / HTTP/1.1" 200 OK
web-app-1  | DEBUG: Getting Web3 manager for wallet: 0xfe09335d5d71431fef3d53beddc772c8269bf953
web-app-1  | 2025-10-25 12:12:10,639 - src.api.auth - INFO - Getting Web3 manager for wallet: 0xfe09335d5d71431fef3d53beddc772c8269bf953
web-app-1  | DEBUG: Web3 manager obtained successfully
web-app-1  | 2025-10-25 12:12:10,651 - src.api.auth - INFO - Web3 manager obtained successfully
web-app-1  | 2025-10-25 12:12:10,651 - src.api.auth - INFO - Verifying signature for wallet: 0xfe09335d5d71431fef3d53beddc772c8269bf953
web-app-1  | 2025-10-25 12:12:10,674 - src.api.auth - INFO - Signature verification result: True
web-app-1  | 2025-10-25 12:12:10,674 - src.api.auth - INFO - Getting database manager
web-app-1  | 2025-10-25 12:12:10,674 - src.api.auth - INFO - Database manager obtained successfully
web-app-1  | 2025-10-25 12:12:10,675 - src.api.auth - INFO - Checking if user exists: 0xfe09335d5d71431fef3d53beddc772c8269bf953
web-app-1  | 2025-10-25 12:12:10,692 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:12:10,692 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:12:10,717 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:12:10,717 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:12:10,717 INFO sqlalchemy.engine.Engine [generated in 0.00088s] ('0xfe09335d5d71431fef3d53beddc772c8269bf953',)
web-app-1  | 2025-10-25 12:12:10,717 - sqlalchemy.engine.Engine - INFO - [generated in 0.00088s] ('0xfe09335d5d71431fef3d53beddc772c8269bf953',)
web-app-1  | 2025-10-25 12:12:10,721 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:12:10,721 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     192.168.65.1:31353 - "POST /api/auth/login HTTP/1.1" 500 Internal Server Error
web-app-1  | INFO:     192.168.65.1:31353 - "GET /api/auth/generate-message?wallet_address=0xfe09335d5d71431fef3d53beddc772c8269bf953 HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:12:15,330 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:12:15,330 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:12:15,334 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:12:15,334 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:12:15,335 INFO sqlalchemy.engine.Engine [cached since 4.618s ago] ('0xfe09335d5d71431fef3d53beddc772c8269bf953',)
web-app-1  | 2025-10-25 12:12:15,335 - sqlalchemy.engine.Engine - INFO - [cached since 4.618s ago] ('0xfe09335d5d71431fef3d53beddc772c8269bf953',)
web-app-1  | 2025-10-25 12:12:15,338 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:12:15,338 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     192.168.65.1:31353 - "POST /api/auth/create-user HTTP/1.1" 500 Internal Server Error
web-app-1  | 2025-10-25 12:12:17,776 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:12:17,776 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:12:17,781 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:12:17,781 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:12:17,782 INFO sqlalchemy.engine.Engine [cached since 62.63s ago] ()
web-app-1  | 2025-10-25 12:12:17,782 - sqlalchemy.engine.Engine - INFO - [cached since 62.63s ago] ()
web-app-1  | 2025-10-25 12:12:17,785 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:12:17,785 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:43662 - "GET / HTTP/1.1" 200 OK
web-app-1  | INFO:     192.168.65.1:50432 - "GET /login HTTP/1.1" 200 OK
web-app-1  | DEBUG: Getting Web3 manager for wallet: 0xfe09335d5d71431fef3d53beddc772c8269bf953
web-app-1  | 2025-10-25 12:12:45,004 - src.api.auth - INFO - Getting Web3 manager for wallet: 0xfe09335d5d71431fef3d53beddc772c8269bf953
web-app-1  | DEBUG: Web3 manager obtained successfully
web-app-1  | 2025-10-25 12:12:45,008 - src.api.auth - INFO - Web3 manager obtained successfully
web-app-1  | 2025-10-25 12:12:45,008 - src.api.auth - INFO - Verifying signature for wallet: 0xfe09335d5d71431fef3d53beddc772c8269bf953
web-app-1  | 2025-10-25 12:12:45,018 - src.api.auth - INFO - Signature verification result: True
web-app-1  | 2025-10-25 12:12:45,018 - src.api.auth - INFO - Getting database manager
web-app-1  | 2025-10-25 12:12:45,019 - src.api.auth - INFO - Database manager obtained successfully
web-app-1  | 2025-10-25 12:12:45,019 - src.api.auth - INFO - Checking if user exists: 0xfe09335d5d71431fef3d53beddc772c8269bf953
web-app-1  | 2025-10-25 12:12:45,036 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:12:45,036 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:12:45,037 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:12:45,037 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:12:45,037 INFO sqlalchemy.engine.Engine [cached since 34.32s ago] ('0xfe09335d5d71431fef3d53beddc772c8269bf953',)
web-app-1  | 2025-10-25 12:12:45,037 - sqlalchemy.engine.Engine - INFO - [cached since 34.32s ago] ('0xfe09335d5d71431fef3d53beddc772c8269bf953',)
web-app-1  | 2025-10-25 12:12:45,042 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:12:45,042 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     192.168.65.1:17879 - "POST /api/auth/login HTTP/1.1" 500 Internal Server Error
web-app-1  | INFO:     192.168.65.1:17879 - "GET /api/auth/generate-message?wallet_address=0xfe09335d5d71431fef3d53beddc772c8269bf953 HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:12:47,906 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:12:47,906 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:12:47,913 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:12:47,913 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:12:47,914 INFO sqlalchemy.engine.Engine [cached since 92.76s ago] ()
web-app-1  | 2025-10-25 12:12:47,914 - sqlalchemy.engine.Engine - INFO - [cached since 92.76s ago] ()
web-app-1  | 2025-10-25 12:12:47,921 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:12:47,921 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:48520 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:12:48,981 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:12:48,981 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:12:48,983 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:12:48,983 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:12:48,984 INFO sqlalchemy.engine.Engine [cached since 38.27s ago] ('0xfe09335d5d71431fef3d53beddc772c8269bf953',)
web-app-1  | 2025-10-25 12:12:48,984 - sqlalchemy.engine.Engine - INFO - [cached since 38.27s ago] ('0xfe09335d5d71431fef3d53beddc772c8269bf953',)
web-app-1  | 2025-10-25 12:12:48,989 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:12:48,989 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     192.168.65.1:17879 - "POST /api/auth/create-user HTTP/1.1" 500 Internal Server Error
web-app-1  | DEBUG: Getting Web3 manager for wallet: 0xfe09335d5d71431fef3d53beddc772c8269bf953
web-app-1  | 2025-10-25 12:12:55,531 - src.api.auth - INFO - Getting Web3 manager for wallet: 0xfe09335d5d71431fef3d53beddc772c8269bf953
web-app-1  | DEBUG: Web3 manager obtained successfully
web-app-1  | 2025-10-25 12:12:55,535 - src.api.auth - INFO - Web3 manager obtained successfully
web-app-1  | 2025-10-25 12:12:55,535 - src.api.auth - INFO - Verifying signature for wallet: 0xfe09335d5d71431fef3d53beddc772c8269bf953
web-app-1  | 2025-10-25 12:12:55,543 - src.api.auth - INFO - Signature verification result: True
web-app-1  | 2025-10-25 12:12:55,544 - src.api.auth - INFO - Getting database manager
web-app-1  | 2025-10-25 12:12:55,544 - src.api.auth - INFO - Database manager obtained successfully
web-app-1  | 2025-10-25 12:12:55,544 - src.api.auth - INFO - Checking if user exists: 0xfe09335d5d71431fef3d53beddc772c8269bf953
web-app-1  | 2025-10-25 12:12:55,551 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:12:55,551 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:12:55,552 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:12:55,552 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:12:55,552 INFO sqlalchemy.engine.Engine [cached since 44.84s ago] ('0xfe09335d5d71431fef3d53beddc772c8269bf953',)
web-app-1  | 2025-10-25 12:12:55,552 - sqlalchemy.engine.Engine - INFO - [cached since 44.84s ago] ('0xfe09335d5d71431fef3d53beddc772c8269bf953',)
web-app-1  | 2025-10-25 12:12:55,554 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:12:55,554 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     192.168.65.1:58876 - "POST /api/auth/login HTTP/1.1" 500 Internal Server Error
web-app-1  | INFO:     192.168.65.1:58876 - "GET /api/auth/generate-message?wallet_address=0xfe09335d5d71431fef3d53beddc772c8269bf953 HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:13:18,032 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:13:18,032 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:13:18,034 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:13:18,034 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:13:18,035 INFO sqlalchemy.engine.Engine [cached since 122.9s ago] ()
web-app-1  | 2025-10-25 12:13:18,035 - sqlalchemy.engine.Engine - INFO - [cached since 122.9s ago] ()
web-app-1  | 2025-10-25 12:13:18,037 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:13:18,037 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:34858 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:13:48,173 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:13:48,173 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:13:48,178 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:13:48,178 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:13:48,178 INFO sqlalchemy.engine.Engine [cached since 153s ago] ()
web-app-1  | 2025-10-25 12:13:48,178 - sqlalchemy.engine.Engine - INFO - [cached since 153s ago] ()
web-app-1  | 2025-10-25 12:13:48,181 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:13:48,181 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:57530 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:14:18,290 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:14:18,290 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:14:18,295 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:14:18,295 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:14:18,296 INFO sqlalchemy.engine.Engine [cached since 183.1s ago] ()
web-app-1  | 2025-10-25 12:14:18,296 - sqlalchemy.engine.Engine - INFO - [cached since 183.1s ago] ()
web-app-1  | 2025-10-25 12:14:18,297 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:14:18,297 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:58174 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:14:48,432 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:14:48,432 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:14:48,435 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:14:48,435 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:14:48,436 INFO sqlalchemy.engine.Engine [cached since 213.3s ago] ()
web-app-1  | 2025-10-25 12:14:48,436 - sqlalchemy.engine.Engine - INFO - [cached since 213.3s ago] ()
web-app-1  | 2025-10-25 12:14:48,439 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:14:48,439 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:60238 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:15:18,558 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:15:18,558 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:15:18,561 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:15:18,561 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:15:18,561 INFO sqlalchemy.engine.Engine [cached since 243.4s ago] ()
web-app-1  | 2025-10-25 12:15:18,561 - sqlalchemy.engine.Engine - INFO - [cached since 243.4s ago] ()
web-app-1  | 2025-10-25 12:15:18,564 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:15:18,564 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:39402 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:15:48,692 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:15:48,692 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:15:48,695 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:15:48,695 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:15:48,695 INFO sqlalchemy.engine.Engine [cached since 273.5s ago] ()
web-app-1  | 2025-10-25 12:15:48,695 - sqlalchemy.engine.Engine - INFO - [cached since 273.5s ago] ()
web-app-1  | 2025-10-25 12:15:48,697 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:15:48,697 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:48624 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:16:18,836 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:16:18,836 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:16:18,840 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:16:18,840 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:16:18,841 INFO sqlalchemy.engine.Engine [cached since 303.7s ago] ()
web-app-1  | 2025-10-25 12:16:18,841 - sqlalchemy.engine.Engine - INFO - [cached since 303.7s ago] ()
web-app-1  | 2025-10-25 12:16:18,843 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:16:18,843 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:43674 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:16:48,923 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:16:48,923 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:16:48,926 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:16:48,926 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:16:48,927 INFO sqlalchemy.engine.Engine [cached since 333.8s ago] ()
web-app-1  | 2025-10-25 12:16:48,927 - sqlalchemy.engine.Engine - INFO - [cached since 333.8s ago] ()
web-app-1  | 2025-10-25 12:16:48,929 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:16:48,929 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:56116 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:17:19,068 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:17:19,068 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:17:19,072 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:17:19,072 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:17:19,072 INFO sqlalchemy.engine.Engine [cached since 363.9s ago] ()
web-app-1  | 2025-10-25 12:17:19,072 - sqlalchemy.engine.Engine - INFO - [cached since 363.9s ago] ()
web-app-1  | 2025-10-25 12:17:19,074 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:17:19,074 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:46422 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:17:49,190 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:17:49,190 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:17:49,196 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:17:49,196 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:17:49,197 INFO sqlalchemy.engine.Engine [cached since 394s ago] ()
web-app-1  | 2025-10-25 12:17:49,197 - sqlalchemy.engine.Engine - INFO - [cached since 394s ago] ()
web-app-1  | 2025-10-25 12:17:49,199 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:17:49,199 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:53380 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:18:19,289 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:18:19,289 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:18:19,291 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:18:19,291 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:18:19,291 INFO sqlalchemy.engine.Engine [cached since 424.1s ago] ()
web-app-1  | 2025-10-25 12:18:19,291 - sqlalchemy.engine.Engine - INFO - [cached since 424.1s ago] ()
web-app-1  | 2025-10-25 12:18:19,294 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:18:19,294 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:32804 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:18:49,392 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:18:49,392 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:18:49,395 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:18:49,395 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:18:49,395 INFO sqlalchemy.engine.Engine [cached since 454.2s ago] ()
web-app-1  | 2025-10-25 12:18:49,395 - sqlalchemy.engine.Engine - INFO - [cached since 454.2s ago] ()
web-app-1  | 2025-10-25 12:18:49,397 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:18:49,397 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:49906 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:19:19,535 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:19:19,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:19:19,541 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:19:19,541 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:19:19,541 INFO sqlalchemy.engine.Engine [cached since 484.4s ago] ()
web-app-1  | 2025-10-25 12:19:19,541 - sqlalchemy.engine.Engine - INFO - [cached since 484.4s ago] ()
web-app-1  | 2025-10-25 12:19:19,543 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:19:19,543 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:46904 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:19:49,678 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:19:49,678 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:19:49,684 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:19:49,684 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:19:49,685 INFO sqlalchemy.engine.Engine [cached since 514.5s ago] ()
web-app-1  | 2025-10-25 12:19:49,685 - sqlalchemy.engine.Engine - INFO - [cached since 514.5s ago] ()
web-app-1  | 2025-10-25 12:19:49,687 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:19:49,687 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:52448 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:20:19,796 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:20:19,796 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:20:19,799 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:20:19,799 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:20:19,800 INFO sqlalchemy.engine.Engine [cached since 544.7s ago] ()
web-app-1  | 2025-10-25 12:20:19,800 - sqlalchemy.engine.Engine - INFO - [cached since 544.7s ago] ()
web-app-1  | 2025-10-25 12:20:19,802 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:20:19,802 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:33270 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:20:49,923 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:20:49,923 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:20:49,928 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:20:49,928 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:20:49,928 INFO sqlalchemy.engine.Engine [cached since 574.8s ago] ()
web-app-1  | 2025-10-25 12:20:49,928 - sqlalchemy.engine.Engine - INFO - [cached since 574.8s ago] ()
web-app-1  | 2025-10-25 12:20:49,930 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:20:49,930 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:49826 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:21:20,059 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:21:20,059 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:21:20,064 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:21:20,064 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:21:20,064 INFO sqlalchemy.engine.Engine [cached since 604.9s ago] ()
web-app-1  | 2025-10-25 12:21:20,064 - sqlalchemy.engine.Engine - INFO - [cached since 604.9s ago] ()
web-app-1  | 2025-10-25 12:21:20,066 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:21:20,066 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:57860 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:21:50,168 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:21:50,168 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:21:50,172 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:21:50,172 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:21:50,172 INFO sqlalchemy.engine.Engine [cached since 635s ago] ()
web-app-1  | 2025-10-25 12:21:50,172 - sqlalchemy.engine.Engine - INFO - [cached since 635s ago] ()
web-app-1  | 2025-10-25 12:21:50,174 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:21:50,174 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:35598 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:22:20,303 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:22:20,303 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:22:20,306 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:22:20,306 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:22:20,306 INFO sqlalchemy.engine.Engine [cached since 665.2s ago] ()
web-app-1  | 2025-10-25 12:22:20,306 - sqlalchemy.engine.Engine - INFO - [cached since 665.2s ago] ()
web-app-1  | 2025-10-25 12:22:20,308 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:22:20,308 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:51734 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:22:50,415 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:22:50,415 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:22:50,418 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:22:50,418 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:22:50,418 INFO sqlalchemy.engine.Engine [cached since 695.3s ago] ()
web-app-1  | 2025-10-25 12:22:50,418 - sqlalchemy.engine.Engine - INFO - [cached since 695.3s ago] ()
web-app-1  | 2025-10-25 12:22:50,420 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:22:50,420 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:58294 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:23:20,552 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:23:20,552 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:23:20,557 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:23:20,557 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:23:20,557 INFO sqlalchemy.engine.Engine [cached since 725.4s ago] ()
web-app-1  | 2025-10-25 12:23:20,557 - sqlalchemy.engine.Engine - INFO - [cached since 725.4s ago] ()
web-app-1  | 2025-10-25 12:23:20,559 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:23:20,559 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:35756 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:23:50,666 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:23:50,666 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:23:50,671 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:23:50,671 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:23:50,671 INFO sqlalchemy.engine.Engine [cached since 755.6s ago] ()
web-app-1  | 2025-10-25 12:23:50,671 - sqlalchemy.engine.Engine - INFO - [cached since 755.6s ago] ()
web-app-1  | 2025-10-25 12:23:50,673 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:23:50,673 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:54052 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:24:20,772 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:24:20,772 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:24:20,776 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:24:20,776 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:24:20,776 INFO sqlalchemy.engine.Engine [cached since 785.7s ago] ()
web-app-1  | 2025-10-25 12:24:20,776 - sqlalchemy.engine.Engine - INFO - [cached since 785.7s ago] ()
web-app-1  | 2025-10-25 12:24:20,777 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:24:20,777 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:45772 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:24:50,926 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:24:50,926 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:24:50,929 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:24:50,929 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:24:50,929 INFO sqlalchemy.engine.Engine [cached since 815.8s ago] ()
web-app-1  | 2025-10-25 12:24:50,929 - sqlalchemy.engine.Engine - INFO - [cached since 815.8s ago] ()
web-app-1  | 2025-10-25 12:24:50,931 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:24:50,931 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:58168 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:25:21,087 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:25:21,087 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:25:21,091 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:25:21,091 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:25:21,091 INFO sqlalchemy.engine.Engine [cached since 846s ago] ()
web-app-1  | 2025-10-25 12:25:21,091 - sqlalchemy.engine.Engine - INFO - [cached since 846s ago] ()
web-app-1  | 2025-10-25 12:25:21,093 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:25:21,093 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:52072 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:25:51,230 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:25:51,230 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:25:51,233 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:25:51,233 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:25:51,234 INFO sqlalchemy.engine.Engine [cached since 876.1s ago] ()
web-app-1  | 2025-10-25 12:25:51,234 - sqlalchemy.engine.Engine - INFO - [cached since 876.1s ago] ()
web-app-1  | 2025-10-25 12:25:51,237 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:25:51,237 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:48458 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:26:21,354 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:26:21,354 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:26:21,358 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:26:21,358 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:26:21,358 INFO sqlalchemy.engine.Engine [cached since 906.2s ago] ()
web-app-1  | 2025-10-25 12:26:21,358 - sqlalchemy.engine.Engine - INFO - [cached since 906.2s ago] ()
web-app-1  | 2025-10-25 12:26:21,360 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:26:21,360 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:41624 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:26:51,467 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:26:51,467 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:26:51,470 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:26:51,470 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:26:51,471 INFO sqlalchemy.engine.Engine [cached since 936.4s ago] ()
web-app-1  | 2025-10-25 12:26:51,471 - sqlalchemy.engine.Engine - INFO - [cached since 936.4s ago] ()
web-app-1  | 2025-10-25 12:26:51,472 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:26:51,472 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:58394 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:27:21,564 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:27:21,564 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:27:21,567 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:27:21,567 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:27:21,567 INFO sqlalchemy.engine.Engine [cached since 966.5s ago] ()
web-app-1  | 2025-10-25 12:27:21,567 - sqlalchemy.engine.Engine - INFO - [cached since 966.5s ago] ()
web-app-1  | 2025-10-25 12:27:21,569 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:27:21,569 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:59212 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:27:51,671 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:27:51,671 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:27:51,675 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:27:51,675 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:27:51,676 INFO sqlalchemy.engine.Engine [cached since 996.6s ago] ()
web-app-1  | 2025-10-25 12:27:51,676 - sqlalchemy.engine.Engine - INFO - [cached since 996.6s ago] ()
web-app-1  | 2025-10-25 12:27:51,678 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:27:51,678 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:52736 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:28:21,782 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:28:21,782 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:28:21,785 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:28:21,785 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:28:21,785 INFO sqlalchemy.engine.Engine [cached since 1027s ago] ()
web-app-1  | 2025-10-25 12:28:21,785 - sqlalchemy.engine.Engine - INFO - [cached since 1027s ago] ()
web-app-1  | 2025-10-25 12:28:21,787 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:28:21,787 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:44344 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:28:51,891 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:28:51,891 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:28:51,896 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:28:51,896 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:28:51,897 INFO sqlalchemy.engine.Engine [cached since 1057s ago] ()
web-app-1  | 2025-10-25 12:28:51,897 - sqlalchemy.engine.Engine - INFO - [cached since 1057s ago] ()
web-app-1  | 2025-10-25 12:28:51,900 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:28:51,900 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:45436 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:29:22,025 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:29:22,025 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:29:22,028 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:29:22,028 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:29:22,028 INFO sqlalchemy.engine.Engine [cached since 1087s ago] ()
web-app-1  | 2025-10-25 12:29:22,028 - sqlalchemy.engine.Engine - INFO - [cached since 1087s ago] ()
web-app-1  | 2025-10-25 12:29:22,030 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:29:22,030 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:53606 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:29:52,190 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:29:52,190 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:29:52,193 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:29:52,193 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:29:52,194 INFO sqlalchemy.engine.Engine [cached since 1117s ago] ()
web-app-1  | 2025-10-25 12:29:52,194 - sqlalchemy.engine.Engine - INFO - [cached since 1117s ago] ()
web-app-1  | 2025-10-25 12:29:52,196 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:29:52,196 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:59476 - "GET / HTTP/1.1" 200 OK
web-app-1  | 2025-10-25 12:30:22,331 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:22,331 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:22,334 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:30:22,334 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:30:22,334 INFO sqlalchemy.engine.Engine [cached since 1147s ago] ()
web-app-1  | 2025-10-25 12:30:22,334 - sqlalchemy.engine.Engine - INFO - [cached since 1147s ago] ()
web-app-1  | 2025-10-25 12:30:22,336 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:30:22,336 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:38394 - "GET / HTTP/1.1" 200 OK
web-app-1  | INFO:     Shutting down
web-app-1  | INFO:     Waiting for application shutdown.
web-app-1  | 2025-10-25 12:30:48,601 - src.main - INFO - Shutting down dYdX Trading Service...
web-app-1  | 2025-10-25 12:30:48,624 - src.db.database - INFO - Database connections closed
web-app-1  | 2025-10-25 12:30:48,624 - src.main - INFO - Database connections closed
web-app-1  | 2025-10-25 12:30:48,625 - src.main - INFO - dYdX Trading Service shutdown completed
web-app-1  | INFO:     Application shutdown complete.
web-app-1  | INFO:     Finished server process [1]
web-app-1  | /usr/local/lib/python3.12/site-packages/web3/__init__.py:2: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
web-app-1  |   import pkg_resources
web-app-1  | Node URL should not contain http(s)://. Stripping the prefix. In the future, consider providing the URL without the http(s) prefix.
web-app-1  | 2025-10-25 12:30:52,922 - src.core.logging_config - INFO - Logging configuration initialized
web-app-1  | Including API routers...
web-app-1  | Auth router included
web-app-1  | User router included
web-app-1  | Trading router included
web-app-1  | Webhooks router included
web-app-1  | WebSocket router included
web-app-1  | Enhanced WebSocket router included
web-app-1  | Health check router included
web-app-1  | Equity curve router included
web-app-1  | 2025-10-25 12:30:52,932 - src.main - INFO - CORS configured for origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:5173']
web-app-1  | Adding SlowAPI middleware...
web-app-1  | SlowAPI middleware added
web-app-1  | Rate limit exception handler added
web-app-1  | INFO:     Started server process [1]
web-app-1  | INFO:     Waiting for application startup.
web-app-1  | Starting dYdX Trading Service...
web-app-1  | 2025-10-25 12:30:52,936 - src.main - INFO - Starting dYdX Trading Service...
web-app-1  | Starting lifespan event handler...
web-app-1  | Validating network configuration...
web-app-1  | 2025-10-25 12:30:52,936 - src.core.network_validator - INFO - development environment detected. Using testnet.
web-app-1  | 2025-10-25 12:30:52,936 - src.main - INFO - Network validation passed: testnet (dydx-testnet-1)
web-app-1  | 
web-app-1  | ============================================================
web-app-1  | dYdX Network Configuration
web-app-1  | ============================================================
web-app-1  | Environment: development
web-app-1  | Network Type: TESTNET
web-app-1  | Network ID: 11155111
web-app-1  | Chain ID: dydx-testnet-1
web-app-1  | REST URL: https://indexer.v4testnet.dydx.exchange
web-app-1  | WebSocket URL: wss://indexer.v4testnet.dydx.exchange/v4/ws
web-app-1  | Is Production: False
web-app-1  | ============================================================
web-app-1  | 
web-app-1  | ✅ Configuration is safe.
web-app-1  | 
web-app-1  | Validating application configuration...
web-app-1  | Configuration validation messages: []
web-app-1  | 2025-10-25 12:30:52,936 - src.main - INFO - Encryption manager initialized
web-app-1  | 2025-10-25 12:30:53,000 INFO sqlalchemy.engine.Engine select pg_catalog.version()
web-app-1  | 2025-10-25 12:30:53,000 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
web-app-1  | 2025-10-25 12:30:53,001 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:30:53,001 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:30:53,002 INFO sqlalchemy.engine.Engine select current_schema()
web-app-1  | 2025-10-25 12:30:53,002 - sqlalchemy.engine.Engine - INFO - select current_schema()
web-app-1  | 2025-10-25 12:30:53,002 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:30:53,002 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:30:53,003 INFO sqlalchemy.engine.Engine show standard_conforming_strings
web-app-1  | 2025-10-25 12:30:53,003 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
web-app-1  | 2025-10-25 12:30:53,003 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:30:53,003 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:30:53,003 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:53,003 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:53,005 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:53,005 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:53,005 INFO sqlalchemy.engine.Engine [generated in 0.00020s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:53,005 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:53,007 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:53,007 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:53,007 INFO sqlalchemy.engine.Engine [cached since 0.001904s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:53,007 - sqlalchemy.engine.Engine - INFO - [cached since 0.001904s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:53,007 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:53,007 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:53,008 INFO sqlalchemy.engine.Engine [cached since 0.002318s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:53,008 - sqlalchemy.engine.Engine - INFO - [cached since 0.002318s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:53,008 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:53,008 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:53,008 INFO sqlalchemy.engine.Engine [cached since 0.002766s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:53,008 - sqlalchemy.engine.Engine - INFO - [cached since 0.002766s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:53,008 INFO sqlalchemy.engine.Engine COMMIT
web-app-1  | 2025-10-25 12:30:53,008 - sqlalchemy.engine.Engine - INFO - COMMIT
web-app-1  | 2025-10-25 12:30:53,009 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:53,009 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:53,009 INFO sqlalchemy.engine.Engine SELECT 1
web-app-1  | 2025-10-25 12:30:53,009 - sqlalchemy.engine.Engine - INFO - SELECT 1
web-app-1  | 2025-10-25 12:30:53,009 INFO sqlalchemy.engine.Engine [generated in 0.00010s] ()
web-app-1  | 2025-10-25 12:30:53,009 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ()
web-app-1  | 2025-10-25 12:30:53,010 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:30:53,010 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:30:53,010 - src.db.database - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:30:53,010 - src.main - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:30:53,011 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:53,011 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:53,011 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:30:53,011 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:30:53,011 INFO sqlalchemy.engine.Engine [generated in 0.00013s] ()
web-app-1  | 2025-10-25 12:30:53,011 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] ()
web-app-1  | 2025-10-25 12:30:53,012 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:30:53,012 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:30:53,012 - src.main - INFO - Database health check passed in 2.0ms
web-app-1  | 2025-10-25 12:30:53,013 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:53,013 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:53,018 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:30:53,018 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:30:53,018 INFO sqlalchemy.engine.Engine [generated in 0.00022s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:30:53,018 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:30:53,022 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:30:53,022 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:30:53,023 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:53,023 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:53,023 INFO sqlalchemy.engine.Engine INSERT INTO users (wallet_address, webhook_uuid, encrypted_webhook_secret, encrypted_dydx_testnet_mnemonic, encrypted_dydx_mainnet_mnemonic, dydx_network_id, encrypted_telegram_token, encrypted_telegram_chat_id, created_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::INTEGER, $7::VARCHAR, $8::VARCHAR, $9::TIMESTAMP WITHOUT TIME ZONE)
web-app-1  | 2025-10-25 12:30:53,023 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (wallet_address, webhook_uuid, encrypted_webhook_secret, encrypted_dydx_testnet_mnemonic, encrypted_dydx_mainnet_mnemonic, dydx_network_id, encrypted_telegram_token, encrypted_telegram_chat_id, created_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::INTEGER, $7::VARCHAR, $8::VARCHAR, $9::TIMESTAMP WITHOUT TIME ZONE)
web-app-1  | 2025-10-25 12:30:53,023 INFO sqlalchemy.engine.Engine [generated in 0.00018s] ('0x1234567890123456789012345678901234567890', '550e8400-e29b-41d4-a716-446655440000', None, None, None, 11155111, None, None, datetime.datetime(2025, 10, 25, 12, 30, 53, 22505))
web-app-1  | 2025-10-25 12:30:53,023 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('0x1234567890123456789012345678901234567890', '550e8400-e29b-41d4-a716-446655440000', None, None, None, 11155111, None, None, datetime.datetime(2025, 10, 25, 12, 30, 53, 22505))
web-app-1  | 2025-10-25 12:30:53,025 INFO sqlalchemy.engine.Engine COMMIT
web-app-1  | 2025-10-25 12:30:53,025 - sqlalchemy.engine.Engine - INFO - COMMIT
web-app-1  | 2025-10-25 12:30:53,026 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:53,026 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:53,027 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:30:53,027 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:30:53,027 INFO sqlalchemy.engine.Engine [generated in 0.00014s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:30:53,027 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:30:53,028 - src.db.database - INFO - Created user: 0x1234567890123456789012345678901234567890
web-app-1  | 2025-10-25 12:30:53,028 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:30:53,028 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:30:53,028 - src.main - ERROR - Application startup failed: name 'Decimal' is not defined
web-app-1  | ERROR:    Traceback (most recent call last):
web-app-1  |   File "/usr/local/lib/python3.12/site-packages/starlette/routing.py", line 677, in lifespan
web-app-1  |     async with self.lifespan_context(app) as maybe_state:
web-app-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__
web-app-1  |     return await anext(self.gen)
web-app-1  |            ^^^^^^^^^^^^^^^^^^^^^
web-app-1  |   File "/app/src/main.py", line 95, in lifespan
web-app-1  |     await create_sample_data()
web-app-1  |   File "/app/src/db/database.py", line 378, in create_sample_data
web-app-1  |     entry_price=Decimal('45000.00'),
web-app-1  |                 ^^^^^^^
web-app-1  | NameError: name 'Decimal' is not defined
web-app-1  | 
web-app-1  | ERROR:    Application startup failed. Exiting.
web-app-1  | /usr/local/lib/python3.12/site-packages/web3/__init__.py:2: UserWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html. The pkg_resources package is slated for removal as early as 2025-11-30. Refrain from using this package or pin to Setuptools<81.
web-app-1  |   import pkg_resources
web-app-1  | Node URL should not contain http(s)://. Stripping the prefix. In the future, consider providing the URL without the http(s) prefix.
web-app-1  | 2025-10-25 12:30:58,664 - src.core.logging_config - INFO - Logging configuration initialized
web-app-1  | Including API routers...
web-app-1  | Auth router included
web-app-1  | User router included
web-app-1  | Trading router included
web-app-1  | Webhooks router included
web-app-1  | WebSocket router included
web-app-1  | Enhanced WebSocket router included
web-app-1  | Health check router included
web-app-1  | Equity curve router included
web-app-1  | 2025-10-25 12:30:58,673 - src.main - INFO - CORS configured for origins: ['http://localhost:3000', 'http://localhost:8000', 'http://localhost:5173']
web-app-1  | Adding SlowAPI middleware...
web-app-1  | SlowAPI middleware added
web-app-1  | Rate limit exception handler added
web-app-1  | INFO:     Started server process [1]
web-app-1  | INFO:     Waiting for application startup.
web-app-1  | Starting dYdX Trading Service...
web-app-1  | 2025-10-25 12:30:58,676 - src.main - INFO - Starting dYdX Trading Service...
web-app-1  | Starting lifespan event handler...
web-app-1  | Validating network configuration...
web-app-1  | 2025-10-25 12:30:58,677 - src.core.network_validator - INFO - development environment detected. Using testnet.
web-app-1  | 2025-10-25 12:30:58,677 - src.main - INFO - Network validation passed: testnet (dydx-testnet-1)
web-app-1  | 
web-app-1  | ============================================================
web-app-1  | dYdX Network Configuration
web-app-1  | ============================================================
web-app-1  | Environment: development
web-app-1  | Network Type: TESTNET
web-app-1  | Network ID: 11155111
web-app-1  | Chain ID: dydx-testnet-1
web-app-1  | REST URL: https://indexer.v4testnet.dydx.exchange
web-app-1  | WebSocket URL: wss://indexer.v4testnet.dydx.exchange/v4/ws
web-app-1  | Is Production: False
web-app-1  | ============================================================
web-app-1  | 
web-app-1  | ✅ Configuration is safe.
web-app-1  | 
web-app-1  | Validating application configuration...
web-app-1  | Configuration validation messages: []
web-app-1  | 2025-10-25 12:30:58,677 - src.main - INFO - Encryption manager initialized
web-app-1  | 2025-10-25 12:30:58,725 INFO sqlalchemy.engine.Engine select pg_catalog.version()
web-app-1  | 2025-10-25 12:30:58,725 - sqlalchemy.engine.Engine - INFO - select pg_catalog.version()
web-app-1  | 2025-10-25 12:30:58,726 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:30:58,726 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:30:58,727 INFO sqlalchemy.engine.Engine select current_schema()
web-app-1  | 2025-10-25 12:30:58,727 - sqlalchemy.engine.Engine - INFO - select current_schema()
web-app-1  | 2025-10-25 12:30:58,727 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:30:58,727 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:30:58,727 INFO sqlalchemy.engine.Engine show standard_conforming_strings
web-app-1  | 2025-10-25 12:30:58,727 - sqlalchemy.engine.Engine - INFO - show standard_conforming_strings
web-app-1  | 2025-10-25 12:30:58,728 INFO sqlalchemy.engine.Engine [raw sql] ()
web-app-1  | 2025-10-25 12:30:58,728 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
web-app-1  | 2025-10-25 12:30:58,728 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:58,728 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:58,730 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:58,730 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:58,730 INFO sqlalchemy.engine.Engine [generated in 0.00020s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:58,730 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:58,732 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:58,732 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:58,732 INFO sqlalchemy.engine.Engine [cached since 0.001878s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:58,732 - sqlalchemy.engine.Engine - INFO - [cached since 0.001878s ago] ('positions', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:58,732 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:58,732 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:58,733 INFO sqlalchemy.engine.Engine [cached since 0.002328s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:58,733 - sqlalchemy.engine.Engine - INFO - [cached since 0.002328s ago] ('trades', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:58,733 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:58,733 - sqlalchemy.engine.Engine - INFO - SELECT pg_catalog.pg_class.relname 
web-app-1  | FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
web-app-1  | WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
web-app-1  | 2025-10-25 12:30:58,733 INFO sqlalchemy.engine.Engine [cached since 0.002933s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:58,733 - sqlalchemy.engine.Engine - INFO - [cached since 0.002933s ago] ('webhook_events', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
web-app-1  | 2025-10-25 12:30:58,733 INFO sqlalchemy.engine.Engine COMMIT
web-app-1  | 2025-10-25 12:30:58,733 - sqlalchemy.engine.Engine - INFO - COMMIT
web-app-1  | 2025-10-25 12:30:58,734 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:58,734 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:58,734 INFO sqlalchemy.engine.Engine SELECT 1
web-app-1  | 2025-10-25 12:30:58,734 - sqlalchemy.engine.Engine - INFO - SELECT 1
web-app-1  | 2025-10-25 12:30:58,735 INFO sqlalchemy.engine.Engine [generated in 0.00011s] ()
web-app-1  | 2025-10-25 12:30:58,735 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] ()
web-app-1  | 2025-10-25 12:30:58,735 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:30:58,735 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:30:58,735 - src.db.database - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:30:58,735 - src.main - INFO - Database initialized successfully
web-app-1  | 2025-10-25 12:30:58,736 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:58,736 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:58,736 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:30:58,736 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:30:58,736 INFO sqlalchemy.engine.Engine [generated in 0.00010s] ()
web-app-1  | 2025-10-25 12:30:58,736 - sqlalchemy.engine.Engine - INFO - [generated in 0.00010s] ()
web-app-1  | 2025-10-25 12:30:58,736 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:30:58,736 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:30:58,737 - src.main - INFO - Database health check passed in 1.0ms
web-app-1  | 2025-10-25 12:30:58,737 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:58,737 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:30:58,741 INFO sqlalchemy.engine.Engine SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:30:58,741 - sqlalchemy.engine.Engine - INFO - SELECT users.wallet_address, users.webhook_uuid, users.encrypted_webhook_secret, users.encrypted_dydx_testnet_mnemonic, users.encrypted_dydx_mainnet_mnemonic, users.dydx_network_id, users.encrypted_telegram_token, users.encrypted_telegram_chat_id, users.created_at 
web-app-1  | FROM users 
web-app-1  | WHERE users.wallet_address = $1::VARCHAR
web-app-1  | 2025-10-25 12:30:58,741 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:30:58,741 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('0x1234567890123456789012345678901234567890',)
web-app-1  | 2025-10-25 12:30:58,742 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:30:58,742 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | 2025-10-25 12:30:58,743 - src.main - INFO - Sample data created for development
web-app-1  | Initializing error handler and circuit breakers...
web-app-1  | 2025-10-25 12:30:58,743 - src.main - INFO - Error handler and circuit breakers initialized
web-app-1  | 2025-10-25 12:30:58,743 - src.main - ERROR - Failed to initialize position monitoring worker: '_GeneratorContextManager' object is not an iterator
web-app-1  | 2025-10-25 12:30:58,743 - src.main - WARNING - Application will continue without position monitoring worker
web-app-1  | 2025-10-25 12:30:58,743 - src.main - INFO - dYdX Trading Service startup completed successfully
web-app-1  | INFO:     Application startup complete.
web-app-1  | INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
web-app-1  | 2025-10-25 12:31:00,745 INFO sqlalchemy.engine.Engine BEGIN (implicit)
web-app-1  | 2025-10-25 12:31:00,745 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
web-app-1  | 2025-10-25 12:31:00,746 INFO sqlalchemy.engine.Engine SELECT 1 as health_check
web-app-1  | 2025-10-25 12:31:00,746 - sqlalchemy.engine.Engine - INFO - SELECT 1 as health_check
web-app-1  | 2025-10-25 12:31:00,746 INFO sqlalchemy.engine.Engine [cached since 2.01s ago] ()
web-app-1  | 2025-10-25 12:31:00,746 - sqlalchemy.engine.Engine - INFO - [cached since 2.01s ago] ()
web-app-1  | 2025-10-25 12:31:00,747 INFO sqlalchemy.engine.Engine ROLLBACK
web-app-1  | 2025-10-25 12:31:00,747 - sqlalchemy.engine.Engine - INFO - ROLLBACK
web-app-1  | INFO:     127.0.0.1:34658 - "GET / HTTP/1.1" 200 OK
web-app-1  | INFO:     192.168.65.1:33427 - "GET /login HTTP/1.1" 200 OK
